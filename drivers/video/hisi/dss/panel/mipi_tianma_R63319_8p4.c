/* Copyright (c) 2008-2014, Hisilicon Tech. Co., Ltd. All rights reserved.
*
* This program is free software; you can redistribute it and/or modify
* it under the terms of the GNU General Public License version 2 and
* only version 2 as published by the Free Software Foundation.
*
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.	See the
* GNU General Public License for more details.
*
*/

#include "hisi_fb.h"
#if LINUX_VERSION_CODE >= KERNEL_VERSION(4,1,0)
#include <linux/hisi/hisi_adc.h>
#else
#include <linux/huawei/hisi_adc.h>
#endif
#include <huawei_platform/touthscreen/huawei_touchscreen.h>
#include <huawei_platform/log/log_jank.h>
#include <linux/hisi/hw_cmdline_parse.h>
#include <linux/i2c.h>
#include <linux/clk.h>
#include <linux/sysfs.h>
#include <linux/device.h>

#define DTS_COMP_TIANMA_R63319_8P4 "hisilicon,mipi_tianma_R63319_8p4"

static struct hisi_fb_panel_data g_panel_data;
static int g_debug_enable = 0;

struct i2c_client *g_sony_client = NULL;
#define BTV_DEV_NAME "lp8556,btv_i2c_adapter"
#define LP8556_STATUS_REG 0x02
#define LP8556_STATUS_VALUE 0x30

struct btv_register_data {
	u8 reg;
	u8 value;
};
static u8	lp8556_reg_value = 0;
static u8	lp8556_reg_addr = 0;
static int	g_support_mode = 0;

enum {
	CABC_OFF = 0,
	CABC_UI_MODE = 1,
	CABC_STILL_MODE = 2,
	CABC_MOVING_MODE = 3,
};
static int g_cabc_mode = CABC_UI_MODE;


enum {
    COLOR_EN_SRGB = 0,  /*when close color_enhance, need open gmp*/
    COLOR_EN_DEFAULT = 1, /*when open color_enhance, need close gmp*/
    COLOR_EN_CLOSED = 2,  /*when close all, close gmp*/
};
static int g_color_enhancement_mode = COLOR_EN_DEFAULT;

/*******************************************************************************
** Power ON Sequence(sleep mode to Normal mode)
*/
	//L_R
	static char reg_36[] = {
		0x36,
		0x00,
	};

	//24BIT
	static char reg_3A[] = {
		0x3A,
		0x70,
	};

	//Manufacturer Command Access Protect
	static char reg_B0[] = {
		0xB0,
		0x04,
	};

	static char reg_51[] = {
		0x51,
		0xFE,
	};

	static char reg_53[] = {
		0x53,
		0x24,
	};

	static char reg_55[] = {
		0x55,
		0x00,
	};

	static char reg_35[] = {
		0x35,
		0x00,
	};


	//GEN  interface setting
	static char reg_B3[] = {
		0xB3,
		0x14,0x00,0x00,0x00,0x00,0x00,
	};

	//gen interfase id setting
	static char reg_B4[] = {
		0xB4,
		0x0C,
	};

	static char reg_B4new[] = {
		0xB4,
		0x0C,0x00,
	};

	//G dsi control
	static char reg_B6[] = {
		0xB6,
		0x3A,0xD3,
	};

	//G tpc sync control
	static char reg_C3[] = {
		0xC3,
		0x00,0x00,0x00,
	};

	//G SOUT Slew rate adjustment
	static char reg_C0[] = {
		0xC0,
		0x00,0x00,0x00,0x00,0x00,0x00,
	};

	//G DISPLAY SETTING 1
	static char reg_C1[] = {
		0xC1,
		0xC8,0x60,0x00,0xA0,0xB1,0x07,0xCB,0x40,0xE6,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x31,0x48,0x10,0xF8,0x58,0x03,0x00,0x00,0x00,0x00,0x00,0x62,0x01,0x02,0x02,0x00,0x01,0x11,
	};

	//G DISPLAY SETTING 2
	static char reg_C2[] = {
		0xC2,
		0x31,0xF0,0x0A,0x00,0x08,0x08,0x00,0x00,
	};

	static char reg_C2new[] = {
		0xC2,
		0x31,0xF0,0x0A,0x00,0x1F,0x0E,0x00,0x00,
	};

	//G  SOURCE TIMMING SETTING
	static char reg_C4[] = {
		0xC4,
		0x70,0x00,0x00,0x00,0x00,0x22,0x20,0x00,0x22,0x44,0x24,0x01,0x03,0x00,0x00,0x00,0x00,0x00,0x22,0x20,0x00,0x22,0x44,0x24,0x01,0x03,
	};

	//G ltps timing setting
	static char reg_C6[] = {
		0xC6,
		0x7B,0x01,0x09,0x0A,0x4F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x14,0x1D,0x06,
		0x7B,0x01,0x09,0x0A,0x4F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x14,0x1D,0x06,
	};

	static char reg_C6new[] = {
		0xC6,
		0x5B,0x01,0x14,0x0A,0x4C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0x1F,0x06,
		0x5B,0x01,0x14,0x0A,0x4C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0x1F,0x06,
	};

	//gen  GAMMA SETTING
	static char reg_C7[] = {
		0xC7,
		0X00,0X12,0X1A,0X24,0X32,0X41,0X4A,0X59,0X3D,0X45,0X51,0X5F,0X68,0X70,0X77,
		0X00,0X12,0X1A,0X24,0X32,0X41,0X4A,0X59,0X3D,0X45,0X51,0X5F,0X68,0X70,0X77,
	};

	//G panel ipin control
	static char reg_CB[] = {
		0xCB,
		0xFE,0x07,0xE0,0x7F,0x80,0x00,0x00,0x01,0xC0,0x00,
	};

	//G panel interface control
	static char reg_CC[] = {
		0xCC,
		0x0E,
	};

	//G SEQUENER TIMING control
	static char reg_D9[] = {
		0xD9,
		0x00,0x00,0x00,
	};

	//G POWER SETTING(CHARGE PUMP SETTING)
	static char reg_D0[] = {
		0xD0,
		0x11,0x81,0xBB,0x14,0x0F,0x4C,0x19,0x19,0x0C,0x00
	};

	//G POWER SETTING FOR INTERNAL POWER
	static char reg_D2[] = {
		0xD2,
		0x00,
	};

	//G POWER SETTING FOR INTERNAL POWER
	static char reg_D3[] = {
		0xD3,
		0x1B,0x33,0xBB,0xBB,0xB3,0x33,0x33,0x33,0x00,0x01,0x00,0xA0,0xD8,0xA0,0x0D,0x4C,0x4C,0x33,0x3B,0x37,0x70,0x07,0x3D,0xBF,0x33
	};

	//G POWER SETTING FOR INTERNAL POWER
	static char reg_D3_off[] = {
		0xD3,
		0x13,0x33,0xBB,0xB3,0xB3,0x33,0x33,0x33,0x00,0x01,0x00,0xA0,0xD8,0xA0,0x0D,0x74,0x74,0x33,0x3B,0x37,0x72,0x07,0x3D,0xBF,0x33
	};

	//G VCOM SETTING
	static char reg_D5[] = {
		0xD5,
		0x06,0x00,0x00,0x01,0x13,0x01,0x13,
	};

	//NVM load OFF after exit_sleep_mode
	static char reg_D6[] = {
		0xD6,
		0x01,
	};


	static char display_on[] = {
		0x29,
	};

	static char exit_sleep[] = {
		0x11,
	};

static	char bist_test_mode[] = {
		0xDE,
		0x01,0x30,0xF9,0x10,
};

static struct dsi_cmd_desc bist_test_mode_cmds[] = {
	{DTYPE_DCS_LWRITE, 0, 10, WAIT_TYPE_US,
		sizeof(bist_test_mode), bist_test_mode},
};

static char cabc_off[] = {
	0x55,
	0x00,
};

static char cabc_set_mode_UI[] = {
	0x55,
	0x01,
};

static char cabc_set_mode_STILL[] = {
	0x55,
	0x02,
};

static char cabc_set_mode_MOVING[] = {
	0x55,
	0x03,
};

static char cabc_set_min_value[] = {
	0x5E,
	0x30,
};

static char cabc_set_UI_para[] = {
	0xB8,
	0x07,
	0x90,
	0x1E,
	0x30,
	0x1E,
	0x32,
};

static char cabc_set_still_para[] = {
	0xB9,
	0x07,
	0x82,
	0x3C,
	0x30,
	0x3C,
	0x87,
};

static char cabc_set_Moving_para[] = {
	0xBA,
	0x07,
	0x90,
	0x28,
	0x06,
	0x30,
	0x84,
};

static struct dsi_cmd_desc tm_cabc_off_cmds[] = {
	{DTYPE_DCS_LWRITE, 0, 10, WAIT_TYPE_US,
		sizeof(cabc_off), cabc_off},
};

static struct dsi_cmd_desc tm_cabc_ui_on_cmds[] = {
	{DTYPE_DCS_LWRITE, 0, 10, WAIT_TYPE_US,
		sizeof(cabc_set_mode_UI), cabc_set_mode_UI},
};

static struct dsi_cmd_desc tm_cabc_still_on_cmds[] = {
	{DTYPE_DCS_LWRITE, 0, 10, WAIT_TYPE_US,
		sizeof(cabc_set_mode_STILL), cabc_set_mode_STILL},
};

static struct dsi_cmd_desc tm_cabc_moving_on_cmds[] = {
	{DTYPE_DCS_LWRITE, 0, 10, WAIT_TYPE_US,
		sizeof(cabc_set_mode_MOVING), cabc_set_mode_MOVING},
};

static struct dsi_cmd_desc tm_cabc_mode_paras[] = {
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US,
		sizeof(cabc_set_UI_para), cabc_set_UI_para},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US,
		sizeof(cabc_set_still_para), cabc_set_still_para},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US,
		sizeof(cabc_set_Moving_para), cabc_set_Moving_para},
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_US,
		sizeof(cabc_set_min_value), cabc_set_min_value},
};

/*******************************************************************************
** Power OFF Sequence(Normal to power off)
*/
static char display_off[] = {
	0x28,
};

static char enter_sleep[] = {
	0x10,
};

static struct dsi_cmd_desc lcd_init_display_on_cmds_otp[] = {
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_US, sizeof(reg_36), reg_36},
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_US, sizeof(reg_3A), reg_3A},
	{DTYPE_GEN_WRITE2, 0, 10, WAIT_TYPE_US, sizeof(reg_B0), reg_B0},
	{DTYPE_GEN_WRITE2, 0, 10, WAIT_TYPE_US, sizeof(reg_D6), reg_D6},
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_US, sizeof(reg_51), reg_51},
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_US, sizeof(reg_53), reg_53},
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_US, sizeof(reg_55), reg_55},
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_US, sizeof(reg_35), reg_35},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_C2new), reg_C2new},
	{DTYPE_DCS_WRITE1, 0, 120, WAIT_TYPE_MS, sizeof(display_on), display_on},
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_MS, sizeof(exit_sleep), exit_sleep},
};

static struct dsi_cmd_desc lcd_init_display_on_cmds[] = {
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_US, sizeof(reg_36), reg_36},
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_US, sizeof(reg_3A), reg_3A},
	{DTYPE_GEN_WRITE2, 0, 10, WAIT_TYPE_US, sizeof(reg_B0), reg_B0},
	{DTYPE_GEN_WRITE2, 0, 10, WAIT_TYPE_US, sizeof(reg_D6), reg_D6},
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_US, sizeof(reg_51), reg_51},
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_US, sizeof(reg_53), reg_53},
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_US, sizeof(reg_55), reg_55},
	{DTYPE_DCS_WRITE1, 0, 10, WAIT_TYPE_US, sizeof(reg_35), reg_35},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_B3), reg_B3},
	//{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_B4), reg_B4},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_B4new), reg_B4new},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_B6), reg_B6},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_C3), reg_C3},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_C0), reg_C0},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_C1), reg_C1},
	//{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_C2), reg_C2},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_C2new), reg_C2new},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_C4), reg_C4},
	//{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_C6), reg_C6},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_C6new), reg_C6new},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_C7), reg_C7},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_CB), reg_CB},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_CC), reg_CC},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_D9), reg_D9},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_D0), reg_D0},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_D2), reg_D2},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_D3), reg_D3},
	{DTYPE_GEN_LWRITE, 0, 10, WAIT_TYPE_US, sizeof(reg_D5), reg_D5},
	//{DTYPE_GEN_LWRITE, 0, 200, WAIT_TYPE_US, sizeof(bist_test_mode), bist_test_mode},
	{DTYPE_DCS_WRITE, 0, 120, WAIT_TYPE_MS, sizeof(display_on), display_on},
	{DTYPE_DCS_WRITE, 0, 10, WAIT_TYPE_MS, sizeof(exit_sleep), exit_sleep},
};

static struct dsi_cmd_desc display_off_cmds[] = {
	{DTYPE_DCS_WRITE, 0, 21, WAIT_TYPE_MS, sizeof(display_off), display_off},
	{DTYPE_GEN_LWRITE, 0, 51, WAIT_TYPE_MS, sizeof(reg_D3_off), reg_D3_off},
	{DTYPE_DCS_WRITE, 0, 50, WAIT_TYPE_MS, sizeof(enter_sleep), enter_sleep},
};
/*******************************************************************************
** LCD VCC
*/
#define VCC_LCDIO_NAME	"lcdio-vcc"

static struct regulator *vcc_lcdio;

static struct vcc_desc lcd_vcc_init_cmds[] = {
	/* vcc get */
	{DTYPE_VCC_GET, VCC_LCDIO_NAME, &vcc_lcdio, 0, 0, WAIT_TYPE_MS, 0},
	/* io set voltage */
	{DTYPE_VCC_SET_VOLTAGE, VCC_LCDIO_NAME, &vcc_lcdio, 1800000, 1800000, WAIT_TYPE_MS, 0},
};
static struct vcc_desc lcd_vcc_enable_cmds[] = {
	/* vcc enable */
	{DTYPE_VCC_ENABLE, VCC_LCDIO_NAME, &vcc_lcdio, 0, 0, WAIT_TYPE_MS, 3},
};

/*******************************************************************************
** LCD IOMUX
*/
static struct pinctrl_data pctrl;

static struct pinctrl_cmd_desc lcd_pinctrl_init_cmds[] = {
	{DTYPE_PINCTRL_GET, &pctrl, 0},
	{DTYPE_PINCTRL_STATE_GET, &pctrl, DTYPE_PINCTRL_STATE_DEFAULT},
	{DTYPE_PINCTRL_STATE_GET, &pctrl, DTYPE_PINCTRL_STATE_IDLE},
};

static struct pinctrl_cmd_desc lcd_pinctrl_normal_cmds[] = {
	{DTYPE_PINCTRL_SET, &pctrl, DTYPE_PINCTRL_STATE_DEFAULT},
};

static struct pinctrl_cmd_desc lcd_pinctrl_lowpower_cmds[] = {
	{DTYPE_PINCTRL_SET, &pctrl, DTYPE_PINCTRL_STATE_IDLE},
};

static struct pinctrl_cmd_desc lcd_pinctrl_finit_cmds[] = {
	{DTYPE_PINCTRL_PUT, &pctrl, 0},
};


/*******************************************************************************
** LCD GPIO
*/
#define GPIO_LCD_G_BL_ENABLE_NAME "gpio_lcd_g_bl_enable"
#define GPIO_LCD_VCC1V8_ENABLE_NAME    "gpio_lcd_vcc1v8_enable"
#define GPIO_LCD_BL_ENABLE_NAME "gpio_lcd_bl_enable"
#define GPIO_LCD_RESET_NAME "gpio_lcd_reset"
#define GPIO_LCD_P5V5_ENABLE_NAME   "gpio_lcd_p5v5_enable"
#define GPIO_LCD_N5V5_ENABLE_NAME "gpio_lcd_n5v5_enable"

static uint32_t gpio_lcd_g_bl_enable;
static uint32_t gpio_lcd_vcc1v8_enable;
static uint32_t gpio_lcd_bl_enable;
static uint32_t gpio_lcd_reset;
static uint32_t gpio_lcd_p5v5_enable;
static uint32_t gpio_lcd_n5v5_enable;

static struct gpio_desc lcd_gpio_request_cmds[] = {
	/* g_bl_enable */
	{DTYPE_GPIO_REQUEST, WAIT_TYPE_MS, 0,
		GPIO_LCD_G_BL_ENABLE_NAME, &gpio_lcd_g_bl_enable, 0},
	/* VDDIO_1.8V */
	{DTYPE_GPIO_REQUEST, WAIT_TYPE_MS, 0,
		GPIO_LCD_VCC1V8_ENABLE_NAME, &gpio_lcd_vcc1v8_enable, 0},
	/* VSP_5.5V */
	{DTYPE_GPIO_REQUEST, WAIT_TYPE_MS, 0,
		GPIO_LCD_P5V5_ENABLE_NAME, &gpio_lcd_p5v5_enable, 0},
	/* VSN_-5.8V */
	{DTYPE_GPIO_REQUEST, WAIT_TYPE_MS, 0,
		GPIO_LCD_N5V5_ENABLE_NAME, &gpio_lcd_n5v5_enable, 0},
	/* reset */
	{DTYPE_GPIO_REQUEST, WAIT_TYPE_MS, 0,
		GPIO_LCD_RESET_NAME, &gpio_lcd_reset, 0},
	/* backlight enable */
	{DTYPE_GPIO_REQUEST, WAIT_TYPE_MS, 0,
		GPIO_LCD_BL_ENABLE_NAME, &gpio_lcd_bl_enable, 0},
};

static struct gpio_desc lcd_gpio_normal_cmds[] = {
	/* g_bl_enable */
	{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 1,
		GPIO_LCD_G_BL_ENABLE_NAME, &gpio_lcd_g_bl_enable, 1},
	/* VCC_1.8V */
	{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 2,
		GPIO_LCD_VCC1V8_ENABLE_NAME, &gpio_lcd_vcc1v8_enable, 1},
	/* AVDD_5.5V */
	{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 2,
		GPIO_LCD_P5V5_ENABLE_NAME, &gpio_lcd_p5v5_enable, 1},
	/* AVEE_-5.5V */
	{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 10,
		GPIO_LCD_N5V5_ENABLE_NAME, &gpio_lcd_n5v5_enable, 1},
	/* reset */
	//{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 1,
	//	GPIO_LCD_RESET_NAME, &gpio_lcd_reset, 1},
	{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 5,
		GPIO_LCD_RESET_NAME, &gpio_lcd_reset, 0},
	{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 1,
		GPIO_LCD_RESET_NAME, &gpio_lcd_reset, 1},
	/* backlight enable */
	{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 1,
		GPIO_LCD_BL_ENABLE_NAME, &gpio_lcd_bl_enable, 1},
};

static struct gpio_desc lcd_gpio_free_cmds[] = {
	/* backlight enable */
	{DTYPE_GPIO_FREE, WAIT_TYPE_US, 0,
		GPIO_LCD_BL_ENABLE_NAME, &gpio_lcd_bl_enable, 0},
	/* AVEE_-5.5V */
	{DTYPE_GPIO_FREE, WAIT_TYPE_US, 0,
		GPIO_LCD_N5V5_ENABLE_NAME, &gpio_lcd_n5v5_enable, 0},
	/* AVDD_5.5V */
	{DTYPE_GPIO_FREE, WAIT_TYPE_US, 0,
		GPIO_LCD_P5V5_ENABLE_NAME, &gpio_lcd_p5v5_enable, 0},
	/* reset */
	{DTYPE_GPIO_FREE, WAIT_TYPE_US, 0,
		GPIO_LCD_RESET_NAME, &gpio_lcd_reset, 0},
	/* VCC_1.8V */
	{DTYPE_GPIO_FREE, WAIT_TYPE_US, 0,
		GPIO_LCD_VCC1V8_ENABLE_NAME, &gpio_lcd_vcc1v8_enable, 0},
	/* g_bl_enable */
	{DTYPE_GPIO_FREE, WAIT_TYPE_MS, 0,
		GPIO_LCD_G_BL_ENABLE_NAME, &gpio_lcd_g_bl_enable, 0},
};

static struct gpio_desc lcd_gpio_lowpower_cmds[] = {
	/* backlight enable */
	{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 5,
		GPIO_LCD_BL_ENABLE_NAME, &gpio_lcd_bl_enable, 0},
	/* reset */
	{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 10,
		GPIO_LCD_RESET_NAME, &gpio_lcd_reset, 0},
	/* AVEE_-5.5V */
	{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 10,
		GPIO_LCD_N5V5_ENABLE_NAME, &gpio_lcd_n5v5_enable, 0},
	/* AVDD_5.5V*/
	{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 10,
		GPIO_LCD_P5V5_ENABLE_NAME, &gpio_lcd_p5v5_enable, 0},
	/* VCC_1.8V */
	{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 1,
		GPIO_LCD_VCC1V8_ENABLE_NAME, &gpio_lcd_vcc1v8_enable, 0},
	/* g_bl_enable */
	{DTYPE_GPIO_OUTPUT, WAIT_TYPE_MS, 1,
		GPIO_LCD_G_BL_ENABLE_NAME, &gpio_lcd_g_bl_enable, 0},

	/* backlight enable input */
	{DTYPE_GPIO_INPUT, WAIT_TYPE_US, 0,
		GPIO_LCD_BL_ENABLE_NAME, &gpio_lcd_bl_enable, 0},
	/* AVEE_-5.8V input */
	{DTYPE_GPIO_INPUT, WAIT_TYPE_MS, 0,
		GPIO_LCD_N5V5_ENABLE_NAME, &gpio_lcd_n5v5_enable, 0},
	/* AVDD_5.8V input */
	{DTYPE_GPIO_INPUT, WAIT_TYPE_MS, 0,
		GPIO_LCD_P5V5_ENABLE_NAME, &gpio_lcd_p5v5_enable, 0},
	/* reset input */
	{DTYPE_GPIO_INPUT, WAIT_TYPE_US, 0,
		GPIO_LCD_RESET_NAME, &gpio_lcd_reset, 0},
	/* VCC_1.8V */
	{DTYPE_GPIO_INPUT, WAIT_TYPE_MS, 0,
		GPIO_LCD_VCC1V8_ENABLE_NAME, &gpio_lcd_vcc1v8_enable, 0},
	/* g_bl_enable */
	{DTYPE_GPIO_INPUT, WAIT_TYPE_MS, 0,
		GPIO_LCD_G_BL_ENABLE_NAME, &gpio_lcd_g_bl_enable, 0},
};

/*******************************************************************************
**
*/

/*******************************************************************************
** ACM
*/
static u32 acm_lut_hue_table[] = {
	0x0000, 0x0001, 0x0002, 0x0003, 0x0004, 0x0005, 0x0006, 0x0007, 0x0008, 0x0008, 0x0009, 0x000a, 0x000b, 0x000c, 0x000d, 0x000e,
	0x000f, 0x0010, 0x0011, 0x0012, 0x0013, 0x0014, 0x0015, 0x0016, 0x0016, 0x0017, 0x0018, 0x0019, 0x001a, 0x001b, 0x001c, 0x001d,
	0x001e, 0x001f, 0x0020, 0x0021, 0x0022, 0x0022, 0x0023, 0x0024, 0x0025, 0x0026, 0x0027, 0x0028, 0x0028, 0x0029, 0x002a, 0x002b,
	0x002c, 0x002d, 0x002e, 0x002f, 0x0030, 0x0030, 0x0031, 0x0032, 0x0033, 0x0034, 0x0035, 0x0036, 0x0036, 0x0037, 0x0038, 0x0039,
	0x003a, 0x003b, 0x003c, 0x003d, 0x003e, 0x003e, 0x003f, 0x0040, 0x0041, 0x0042, 0x0043, 0x0044, 0x0044, 0x0045, 0x0046, 0x0047,
	0x0048, 0x0049, 0x004a, 0x004b, 0x004c, 0x004c, 0x004d, 0x004e, 0x004f, 0x0050, 0x0051, 0x0052, 0x0052, 0x0053, 0x0054, 0x0055,
	0x0056, 0x0057, 0x0058, 0x0059, 0x005a, 0x005b, 0x005c, 0x005d, 0x005e, 0x0060, 0x0061, 0x0062, 0x0063, 0x0064, 0x0065, 0x0066,
	0x0067, 0x0068, 0x0069, 0x006a, 0x006b, 0x006c, 0x006d, 0x006e, 0x0070, 0x0071, 0x0072, 0x0073, 0x0074, 0x0075, 0x0076, 0x0077,
	0x0078, 0x0079, 0x007a, 0x007b, 0x007c, 0x007d, 0x007e, 0x007f, 0x0080, 0x0082, 0x0083, 0x0084, 0x0085, 0x0086, 0x0087, 0x0088,
	0x0089, 0x008a, 0x008b, 0x008c, 0x008e, 0x008f, 0x0090, 0x0091, 0x0092, 0x0093, 0x0094, 0x0095, 0x0096, 0x0098, 0x0099, 0x009a,
	0x009b, 0x009c, 0x009d, 0x009f, 0x00a0, 0x00a1, 0x00a2, 0x00a3, 0x00a4, 0x00a6, 0x00a7, 0x00a8, 0x00a9, 0x00aa, 0x00ac, 0x00ad,
	0x00ae, 0x00af, 0x00b0, 0x00b1, 0x00b2, 0x00b4, 0x00b5, 0x00b6, 0x00b7, 0x00b8, 0x00b9, 0x00ba, 0x00bc, 0x00bd, 0x00be, 0x00bf,
	0x00c0, 0x00c1, 0x00c2, 0x00c3, 0x00c4, 0x00c5, 0x00c6, 0x00c7, 0x00c8, 0x00c9, 0x00ca, 0x00cb, 0x00cc, 0x00cd, 0x00ce, 0x00cf,
	0x00d0, 0x00d1, 0x00d2, 0x00d3, 0x00d4, 0x00d5, 0x00d6, 0x00d7, 0x00d8, 0x00d9, 0x00da, 0x00db, 0x00dc, 0x00dd, 0x00de, 0x00df,
	0x00e0, 0x00e1, 0x00e2, 0x00e3, 0x00e4, 0x00e5, 0x00e6, 0x00e7, 0x00e8, 0x00e9, 0x00ea, 0x00eb, 0x00ec, 0x00ed, 0x00ee, 0x00ef,
	0x00f0, 0x00f1, 0x00f2, 0x00f3, 0x00f4, 0x00f5, 0x00f6, 0x00f7, 0x00f8, 0x00f9, 0x00fa, 0x00fb, 0x00fc, 0x00fd, 0x00fe, 0x00ff,
	0x0100, 0x0101, 0x0102, 0x0103, 0x0104, 0x0105, 0x0106, 0x0107, 0x0108, 0x0109, 0x010a, 0x010b, 0x010c, 0x010d, 0x010e, 0x010f,
	0x0110, 0x0111, 0x0112, 0x0113, 0x0114, 0x0115, 0x0116, 0x0117, 0x0118, 0x0119, 0x011a, 0x011b, 0x011c, 0x011d, 0x011e, 0x011f,
	0x0120, 0x0121, 0x0122, 0x0123, 0x0124, 0x0125, 0x0126, 0x0127, 0x0128, 0x0129, 0x012a, 0x012b, 0x012c, 0x012d, 0x012e, 0x012f,
	0x0130, 0x0131, 0x0132, 0x0133, 0x0134, 0x0135, 0x0136, 0x0137, 0x0138, 0x0139, 0x013a, 0x013b, 0x013c, 0x013d, 0x013e, 0x013f,
	0x0140, 0x0141, 0x0142, 0x0143, 0x0144, 0x0145, 0x0146, 0x0147, 0x0148, 0x0149, 0x014a, 0x014b, 0x014c, 0x014d, 0x014e, 0x014f,
	0x0150, 0x0151, 0x0152, 0x0153, 0x0154, 0x0155, 0x0156, 0x0157, 0x0158, 0x0159, 0x015a, 0x015b, 0x015c, 0x015d, 0x015e, 0x015f,
	0x0160, 0x0161, 0x0162, 0x0163, 0x0164, 0x0165, 0x0166, 0x0167, 0x0168, 0x0169, 0x016a, 0x016b, 0x016c, 0x016d, 0x016e, 0x016f,
	0x0170, 0x0171, 0x0172, 0x0173, 0x0174, 0x0175, 0x0176, 0x0177, 0x0178, 0x0179, 0x017a, 0x017b, 0x017c, 0x017d, 0x017e, 0x017f,
	0x0180, 0x0181, 0x0182, 0x0183, 0x0184, 0x0185, 0x0186, 0x0187, 0x0188, 0x0189, 0x018a, 0x018b, 0x018c, 0x018d, 0x018e, 0x018f,
	0x0190, 0x0191, 0x0192, 0x0193, 0x0194, 0x0195, 0x0196, 0x0197, 0x0198, 0x0199, 0x019a, 0x019b, 0x019c, 0x019d, 0x019e, 0x019f,
	0x01a0, 0x01a1, 0x01a2, 0x01a2, 0x01a3, 0x01a4, 0x01a4, 0x01a5, 0x01a6, 0x01a7, 0x01a8, 0x01a8, 0x01a9, 0x01aa, 0x01aa, 0x01ab,
	0x01ac, 0x01ad, 0x01ae, 0x01af, 0x01b0, 0x01b1, 0x01b2, 0x01b3, 0x01b4, 0x01b4, 0x01b5, 0x01b6, 0x01b7, 0x01b8, 0x01b9, 0x01ba,
	0x01bb, 0x01bc, 0x01bd, 0x01be, 0x01bf, 0x01c0, 0x01c1, 0x01c2, 0x01c2, 0x01c3, 0x01c4, 0x01c5, 0x01c6, 0x01c7, 0x01c8, 0x01c9,
	0x01ca, 0x01cb, 0x01cc, 0x01cd, 0x01ce, 0x01d0, 0x01d1, 0x01d2, 0x01d3, 0x01d4, 0x01d5, 0x01d6, 0x01d8, 0x01d9, 0x01da, 0x01db,
	0x01dc, 0x01dd, 0x01de, 0x01e0, 0x01e1, 0x01e2, 0x01e4, 0x01e5, 0x01e6, 0x01e7, 0x01e8, 0x01ea, 0x01eb, 0x01ec, 0x01ee, 0x01ef,
	0x01f0, 0x01f1, 0x01f2, 0x01f3, 0x01f4, 0x01f5, 0x01f6, 0x01f7, 0x01f8, 0x01f9, 0x01fa, 0x01fb, 0x01fc, 0x01fd, 0x01fe, 0x01ff,
	0x0200, 0x0201, 0x0202, 0x0203, 0x0204, 0x0205, 0x0206, 0x0207, 0x0208, 0x0209, 0x020a, 0x020b, 0x020c, 0x020d, 0x020e, 0x020f,
	0x0210, 0x0211, 0x0212, 0x0213, 0x0214, 0x0214, 0x0215, 0x0216, 0x0217, 0x0218, 0x0219, 0x021a, 0x021a, 0x021b, 0x021c, 0x021d,
	0x021e, 0x021f, 0x0220, 0x0221, 0x0222, 0x0222, 0x0223, 0x0224, 0x0225, 0x0226, 0x0227, 0x0228, 0x0228, 0x0229, 0x022a, 0x022b,
	0x022c, 0x022d, 0x022e, 0x022f, 0x0230, 0x0231, 0x0232, 0x0233, 0x0234, 0x0234, 0x0235, 0x0236, 0x0237, 0x0238, 0x0239, 0x023a,
	0x023b, 0x023c, 0x023d, 0x023e, 0x023f, 0x0240, 0x0241, 0x0242, 0x0243, 0x0244, 0x0245, 0x0246, 0x0247, 0x0248, 0x0249, 0x024a,
	0x024b, 0x024c, 0x024d, 0x024e, 0x024f, 0x0250, 0x0251, 0x0252, 0x0253, 0x0254, 0x0255, 0x0256, 0x0257, 0x0258, 0x0259, 0x025a,
	0x025b, 0x025c, 0x025d, 0x025e, 0x025f, 0x0260, 0x0261, 0x0262, 0x0263, 0x0264, 0x0265, 0x0266, 0x0267, 0x0268, 0x0269, 0x026a,
	0x026b, 0x026c, 0x026d, 0x026e, 0x026f, 0x0270, 0x0271, 0x0272, 0x0273, 0x0274, 0x0275, 0x0276, 0x0277, 0x0278, 0x0279, 0x027a,
	0x027b, 0x027c, 0x027d, 0x027e, 0x0280, 0x0281, 0x0282, 0x0283, 0x0284, 0x0285, 0x0286, 0x0287, 0x0288, 0x028a, 0x028b, 0x028c,
	0x028d, 0x028e, 0x028f, 0x0291, 0x0292, 0x0293, 0x0294, 0x0295, 0x0296, 0x0298, 0x0299, 0x029a, 0x029b, 0x029c, 0x029e, 0x029f,
	0x02a0, 0x02a1, 0x02a2, 0x02a3, 0x02a4, 0x02a5, 0x02a6, 0x02a7, 0x02a8, 0x02a9, 0x02aa, 0x02ab, 0x02ac, 0x02ad, 0x02ae, 0x02af,
	0x02b0, 0x02b1, 0x02b2, 0x02b3, 0x02b4, 0x02b5, 0x02b6, 0x02b7, 0x02b8, 0x02b9, 0x02ba, 0x02bb, 0x02bc, 0x02bd, 0x02be, 0x02bf,
	0x02c0, 0x02c1, 0x02c2, 0x02c3, 0x02c4, 0x02c5, 0x02c6, 0x02c7, 0x02c8, 0x02c9, 0x02ca, 0x02cb, 0x02cc, 0x02cd, 0x02ce, 0x02cf,
	0x02d0, 0x02d1, 0x02d2, 0x02d3, 0x02d4, 0x02d5, 0x02d6, 0x02d7, 0x02d8, 0x02d9, 0x02da, 0x02db, 0x02dc, 0x02dd, 0x02de, 0x02df,
	0x02e0, 0x02e1, 0x02e2, 0x02e3, 0x02e4, 0x02e5, 0x02e6, 0x02e7, 0x02e8, 0x02e9, 0x02ea, 0x02eb, 0x02ec, 0x02ed, 0x02ee, 0x02ef,
	0x02f0, 0x02f1, 0x02f2, 0x02f3, 0x02f4, 0x02f5, 0x02f6, 0x02f7, 0x02f8, 0x02f9, 0x02fa, 0x02fb, 0x02fc, 0x02fd, 0x02fe, 0x02ff,
	0x0300, 0x0301, 0x0302, 0x0303, 0x0304, 0x0305, 0x0306, 0x0307, 0x0308, 0x0309, 0x030a, 0x030b, 0x030c, 0x030d, 0x030e, 0x030f,
	0x0310, 0x0311, 0x0312, 0x0313, 0x0314, 0x0315, 0x0316, 0x0317, 0x0318, 0x0319, 0x031a, 0x031b, 0x031c, 0x031d, 0x031e, 0x031f,
	0x0320, 0x0321, 0x0322, 0x0323, 0x0324, 0x0325, 0x0326, 0x0327, 0x0328, 0x0329, 0x032a, 0x032b, 0x032c, 0x032d, 0x032e, 0x032f,
	0x0330, 0x0331, 0x0332, 0x0333, 0x0334, 0x0335, 0x0336, 0x0337, 0x0338, 0x0339, 0x033a, 0x033b, 0x033c, 0x033d, 0x033e, 0x033f,
	0x0340, 0x0341, 0x0342, 0x0343, 0x0344, 0x0345, 0x0346, 0x0347, 0x0348, 0x0349, 0x034a, 0x034b, 0x034c, 0x034d, 0x034e, 0x034f,
	0x0350, 0x0351, 0x0352, 0x0353, 0x0354, 0x0355, 0x0356, 0x0357, 0x0358, 0x0359, 0x035a, 0x035b, 0x035c, 0x035d, 0x035e, 0x035f,
	0x0360, 0x0361, 0x0362, 0x0364, 0x0365, 0x0366, 0x0367, 0x0368, 0x036a, 0x036b, 0x036c, 0x036d, 0x036e, 0x036f, 0x0371, 0x0372,
	0x0373, 0x0374, 0x0375, 0x0377, 0x0378, 0x0379, 0x037a, 0x037b, 0x037c, 0x037e, 0x037f, 0x0380, 0x0381, 0x0382, 0x0384, 0x0385,
	0x0386, 0x0387, 0x0388, 0x0389, 0x038a, 0x038b, 0x038c, 0x038d, 0x038e, 0x0390, 0x0391, 0x0392, 0x0393, 0x0394, 0x0395, 0x0396,
	0x0397, 0x0398, 0x0399, 0x039a, 0x039b, 0x039c, 0x039d, 0x039e, 0x03a0, 0x03a1, 0x03a2, 0x03a3, 0x03a4, 0x03a5, 0x03a6, 0x03a7,
	0x03a8, 0x03a9, 0x03aa, 0x03ab, 0x03ac, 0x03ad, 0x03ae, 0x03af, 0x03b0, 0x03b1, 0x03b2, 0x03b3, 0x03b4, 0x03b5, 0x03b6, 0x03b7,
	0x03b8, 0x03b9, 0x03ba, 0x03bb, 0x03bc, 0x03bd, 0x03be, 0x03bf, 0x03c0, 0x03c0, 0x03c1, 0x03c2, 0x03c3, 0x03c4, 0x03c5, 0x03c6,
	0x03c7, 0x03c8, 0x03c9, 0x03ca, 0x03ca, 0x03cb, 0x03cc, 0x03cd, 0x03ce, 0x03cf, 0x03d0, 0x03d1, 0x03d2, 0x03d2, 0x03d3, 0x03d4,
	0x03d5, 0x03d6, 0x03d7, 0x03d8, 0x03d8, 0x03d9, 0x03da, 0x03db, 0x03dc, 0x03dd, 0x03de, 0x03df, 0x03e0, 0x03e0, 0x03e1, 0x03e2,
	0x03e3, 0x03e4, 0x03e5, 0x03e5, 0x03e6, 0x03e7, 0x03e8, 0x03e9, 0x03ea, 0x03ea, 0x03eb, 0x03ec, 0x03ed, 0x03ee, 0x03ee, 0x03ef,
	0x03f0, 0x03f1, 0x03f2, 0x03f3, 0x03f4, 0x03f5, 0x03f6, 0x03f7, 0x03f8, 0x03f9, 0x03fa, 0x03fb, 0x03fc, 0x03fd, 0x03fe, 0x03ff,
};

static u32 acm_lut_sata_table[] = {
	0x0042, 0x003c, 0x0036, 0x0031, 0x002b, 0x0027, 0x0023, 0x001f, 0x001b, 0x001d, 0x001f, 0x0021, 0x0023, 0x002a, 0x0032, 0x0039,
	0x0040, 0x0043, 0x0046, 0x0049, 0x004c, 0x004a, 0x0048, 0x0046, 0x0044, 0x0040, 0x003c, 0x0039, 0x0035, 0x0031, 0x002d, 0x0029,
	0x0025, 0x0020, 0x001c, 0x0018, 0x0013, 0x0010, 0x000c, 0x0009, 0x0006, 0x000a, 0x000e, 0x0013, 0x0017, 0x0023, 0x002e, 0x003a,
	0x0046, 0x0053, 0x0060, 0x006c, 0x0079, 0x0082, 0x008a, 0x0093, 0x009c, 0x00a0, 0x00a4, 0x00a9, 0x00ad, 0x00af, 0x00b1, 0x00b3,
	0x00b5, 0x00b5, 0x00b5, 0x00b5, 0x00b5, 0x00b6, 0x00b7, 0x00b8, 0x00b9, 0x00b9, 0x00b9, 0x00b9, 0x00b9, 0x00ba, 0x00ba, 0x00ba,
	0x00bb, 0x00ba, 0x00ba, 0x00ba, 0x00b9, 0x00ba, 0x00ba, 0x00ba, 0x00bb, 0x00bb, 0x00bb, 0x00bb, 0x00bb, 0x00ba, 0x00ba, 0x00ba,
	0x00b9, 0x00b9, 0x00b9, 0x00b9, 0x00b9, 0x00b8, 0x00b8, 0x00b8, 0x00b7, 0x00b7, 0x00b7, 0x00b7, 0x00b7, 0x00b7, 0x00b7, 0x00b7,
	0x00b7, 0x00b7, 0x00b7, 0x00b7, 0x00b7, 0x00b6, 0x00b4, 0x00b2, 0x00b1, 0x00ae, 0x00ac, 0x00aa, 0x00a7, 0x00a1, 0x009c, 0x0096,
	0x0090, 0x0087, 0x007e, 0x0074, 0x006b, 0x005e, 0x0050, 0x0042, 0x0035, 0x002e, 0x0027, 0x0020, 0x0019, 0x0013, 0x000e, 0x0008,
	0x0002, 0x0004, 0x0005, 0x0006, 0x0008, 0x0008, 0x0008, 0x0008, 0x0008, 0x0008, 0x0009, 0x000a, 0x000a, 0x000d, 0x0010, 0x0014,
	0x0017, 0x001a, 0x001d, 0x0020, 0x0023, 0x0026, 0x0029, 0x002c, 0x002f, 0x0032, 0x0036, 0x0039, 0x003c, 0x003d, 0x003e, 0x003f,
	0x0040, 0x0041, 0x0042, 0x0043, 0x0044, 0x0046, 0x0047, 0x0048, 0x004a, 0x004a, 0x004b, 0x004c, 0x004c, 0x004e, 0x004f, 0x0050,
	0x0052, 0x0053, 0x0054, 0x0055, 0x0056, 0x0058, 0x005a, 0x005b, 0x005d, 0x0060, 0x0062, 0x0064, 0x0067, 0x0068, 0x0069, 0x006a,
	0x006b, 0x006b, 0x006b, 0x006b, 0x006b, 0x006c, 0x006d, 0x006e, 0x006f, 0x006f, 0x006f, 0x006f, 0x006f, 0x0071, 0x0073, 0x0075,
	0x0077, 0x0078, 0x0079, 0x007a, 0x007b, 0x007c, 0x007c, 0x007c, 0x007d, 0x007c, 0x007c, 0x007c, 0x007b, 0x007a, 0x0079, 0x0078,
	0x0077, 0x0075, 0x0073, 0x0071, 0x006f, 0x006d, 0x006b, 0x0069, 0x0067, 0x0062, 0x005e, 0x0059, 0x0054, 0x0050, 0x004b, 0x0046,
};

static u32 acm_lut_satr_table[] = {
	0x0000, 0x0001, 0x0003, 0x0006, 0x0009, 0x000c, 0x000d, 0x000d, 0x000e, 0x000e, 0x000e, 0x000f, 0x000f, 0x000f, 0x0010, 0x0010,
	0x0010, 0x0010, 0x0010, 0x0010, 0x0010, 0x0010, 0x0010, 0x000f, 0x000f, 0x000f, 0x000f, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e,
	0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000d, 0x000c,
	0x000b, 0x000a, 0x0008, 0x0006, 0x0004, 0x0002, 0x0000, 0x00fe, 0x00fc, 0x00fa, 0x00f8, 0x00f5, 0x00f2, 0x00f1, 0x00ef, 0x00ef,
	0x0000, 0x0001, 0x0003, 0x0006, 0x0009, 0x000c, 0x000c, 0x000c, 0x000d, 0x000d, 0x000d, 0x000d, 0x000d, 0x000d, 0x000e, 0x000e,
	0x000e, 0x000e, 0x000e, 0x000e, 0x000f, 0x000f, 0x000f, 0x000f, 0x000f, 0x0010, 0x0010, 0x0010, 0x0010, 0x0010, 0x0010, 0x0010,
	0x0010, 0x0011, 0x0013, 0x0015, 0x0017, 0x0019, 0x001c, 0x001e, 0x0020, 0x0022, 0x0024, 0x0025, 0x0025, 0x0025, 0x0025, 0x0024,
	0x0023, 0x0022, 0x0021, 0x001f, 0x001e, 0x001c, 0x001a, 0x0018, 0x0016, 0x0014, 0x0012, 0x000c, 0x0007, 0x0003, 0x0001, 0x0000,
	0x0000, 0x0000, 0x0002, 0x0003, 0x0006, 0x0008, 0x0009, 0x000a, 0x000a, 0x000b, 0x000b, 0x000c, 0x000d, 0x000d, 0x000d, 0x000e,
	0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e,
	0x000f, 0x0011, 0x0014, 0x0019, 0x001e, 0x0024, 0x002a, 0x0030, 0x0035, 0x003a, 0x003d, 0x003f, 0x0040, 0x0040, 0x003f, 0x003e,
	0x003d, 0x003c, 0x003a, 0x0038, 0x0035, 0x0033, 0x0030, 0x002d, 0x002a, 0x0026, 0x0023, 0x0019, 0x000f, 0x0007, 0x0002, 0x0000,
	0x0000, 0x0000, 0x0001, 0x0003, 0x0005, 0x0007, 0x0007, 0x0008, 0x0008, 0x0009, 0x0009, 0x000a, 0x000a, 0x000b, 0x000b, 0x000b,
	0x000c, 0x000c, 0x000c, 0x000c, 0x000d, 0x000d, 0x000d, 0x000d, 0x000d, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e,
	0x000f, 0x0011, 0x0014, 0x0019, 0x001e, 0x0024, 0x002a, 0x0030, 0x0035, 0x003a, 0x003d, 0x003f, 0x0040, 0x0040, 0x003f, 0x003e,
	0x003d, 0x003c, 0x003a, 0x0038, 0x0035, 0x0033, 0x0030, 0x002d, 0x002a, 0x0026, 0x0023, 0x0019, 0x000f, 0x0007, 0x0002, 0x0000,
	0x0000, 0x0001, 0x0004, 0x0008, 0x000b, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c,
	0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c,
	0x000c, 0x000d, 0x000e, 0x000f, 0x0010, 0x0012, 0x0013, 0x0015, 0x0017, 0x0019, 0x001b, 0x001d, 0x001f, 0x0020, 0x0021, 0x0022,
	0x0023, 0x0024, 0x0024, 0x0025, 0x0025, 0x0026, 0x0026, 0x0027, 0x0027, 0x0027, 0x0027, 0x0023, 0x001a, 0x000d, 0x0004, 0x0000,
	0x0000, 0x0001, 0x0004, 0x0008, 0x000b, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c,
	0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000d, 0x000d, 0x000d, 0x000d, 0x000d, 0x000e, 0x000e,
	0x000e, 0x000f, 0x000f, 0x0010, 0x0010, 0x0011, 0x0012, 0x0013, 0x0013, 0x0014, 0x0015, 0x0016, 0x0017, 0x0018, 0x0019, 0x001a,
	0x001b, 0x001c, 0x001d, 0x001e, 0x001f, 0x001f, 0x0020, 0x0020, 0x0021, 0x0021, 0x0021, 0x001e, 0x0016, 0x000b, 0x0003, 0x0000,
	0x0000, 0x0001, 0x0004, 0x0008, 0x000b, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c,
	0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000c, 0x000d, 0x000d, 0x000d, 0x000d, 0x000d, 0x000e, 0x000e,
	0x000e, 0x000f, 0x000f, 0x0010, 0x0011, 0x0011, 0x0012, 0x0013, 0x0014, 0x0015, 0x0015, 0x0016, 0x0017, 0x0018, 0x0018, 0x0019,
	0x001a, 0x001a, 0x001b, 0x001b, 0x001c, 0x001c, 0x001c, 0x001d, 0x001d, 0x001d, 0x001d, 0x001a, 0x0013, 0x000a, 0x0003, 0x0000,
	0x0000, 0x0001, 0x0003, 0x0007, 0x000a, 0x000c, 0x000c, 0x000d, 0x000d, 0x000d, 0x000d, 0x000d, 0x000e, 0x000e, 0x000e, 0x000e,
	0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e,
	0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000e, 0x000f, 0x000f, 0x000f, 0x000f, 0x000f, 0x0010, 0x0010, 0x0010, 0x0011, 0x0012,
	0x0012, 0x0013, 0x0014, 0x0014, 0x0015, 0x0016, 0x0016, 0x0016, 0x0017, 0x0017, 0x0017, 0x0015, 0x000f, 0x0008, 0x0002, 0x0000,
};

/*******************************************************************************
** GAMMA
*/
static u32 gamma_lut_table_R[] = {
	0x0000, 0x000d, 0x0016, 0x001c, 0x0022, 0x0026, 0x002a, 0x002e, 0x0032, 0x0035, 0x0038, 0x003b, 0x003d, 0x0040, 0x0042, 0x0045,
	0x0047, 0x0049, 0x004b, 0x004d, 0x004f, 0x0051, 0x0053, 0x0055, 0x0056, 0x0058, 0x005a, 0x005c, 0x005d, 0x005f, 0x0060, 0x0062,
	0x0063, 0x0065, 0x0066, 0x0068, 0x0069, 0x006a, 0x006c, 0x006d, 0x006e, 0x0070, 0x0071, 0x0072, 0x0073, 0x0075, 0x0076, 0x0077,
	0x0078, 0x0079, 0x007a, 0x007c, 0x007d, 0x007e, 0x007f, 0x0080, 0x0081, 0x0082, 0x0083, 0x0084, 0x0085, 0x0086, 0x0087, 0x0088,
	0x0089, 0x008a, 0x008b, 0x008c, 0x008d, 0x008e, 0x008f, 0x0090, 0x0091, 0x0092, 0x0093, 0x0094, 0x0094, 0x0095, 0x0096, 0x0097,
	0x0098, 0x0099, 0x009a, 0x009b, 0x009b, 0x009c, 0x009d, 0x009e, 0x009f, 0x009f, 0x00a0, 0x00a1, 0x00a2, 0x00a3, 0x00a3, 0x00a4,
	0x00a5, 0x00a6, 0x00a7, 0x00a7, 0x00a8, 0x00a9, 0x00aa, 0x00aa, 0x00ab, 0x00ac, 0x00ad, 0x00ad, 0x00ae, 0x00af, 0x00af, 0x00b0,
	0x00b1, 0x00b2, 0x00b2, 0x00b3, 0x00b4, 0x00b4, 0x00b5, 0x00b6, 0x00b6, 0x00b7, 0x00b8, 0x00b9, 0x00b9, 0x00ba, 0x00bb, 0x00bb,
	0x00bc, 0x00bd, 0x00bd, 0x00be, 0x00be, 0x00bf, 0x00c0, 0x00c0, 0x00c1, 0x00c2, 0x00c2, 0x00c3, 0x00c4, 0x00c4, 0x00c5, 0x00c5,
	0x00c6, 0x00c7, 0x00c7, 0x00c8, 0x00c8, 0x00c9, 0x00ca, 0x00ca, 0x00cb, 0x00cb, 0x00cc, 0x00cd, 0x00cd, 0x00ce, 0x00ce, 0x00cf,
	0x00d0, 0x00d0, 0x00d1, 0x00d1, 0x00d2, 0x00d2, 0x00d3, 0x00d4, 0x00d4, 0x00d5, 0x00d5, 0x00d6, 0x00d6, 0x00d7, 0x00d7, 0x00d8,
	0x00d8, 0x00d9, 0x00da, 0x00da, 0x00db, 0x00db, 0x00dc, 0x00dc, 0x00dd, 0x00dd, 0x00de, 0x00de, 0x00df, 0x00df, 0x00e0, 0x00e0,
	0x00e1, 0x00e2, 0x00e2, 0x00e3, 0x00e3, 0x00e4, 0x00e4, 0x00e5, 0x00e5, 0x00e6, 0x00e6, 0x00e7, 0x00e7, 0x00e8, 0x00e8, 0x00e9,
	0x00e9, 0x00ea, 0x00ea, 0x00eb, 0x00eb, 0x00ec, 0x00ec, 0x00ed, 0x00ed, 0x00ee, 0x00ee, 0x00ee, 0x00ef, 0x00ef, 0x00f0, 0x00f0,
	0x00f1, 0x00f1, 0x00f2, 0x00f2, 0x00f3, 0x00f3, 0x00f4, 0x00f4, 0x00f5, 0x00f5, 0x00f6, 0x00f6, 0x00f6, 0x00f7, 0x00f7, 0x00f8,
	0x00f8, 0x00f9, 0x00f9, 0x00fa, 0x00fa, 0x00fb, 0x00fb, 0x00fb, 0x00fc, 0x00fc, 0x00fd, 0x00fd, 0x00fe, 0x00fe, 0x00ff, 0x00ff,
};

static u32 gamma_lut_table_G[] = {
	0x0000, 0x000d, 0x0016, 0x001c, 0x0022, 0x0026, 0x002a, 0x002e, 0x0032, 0x0035, 0x0038, 0x003b, 0x003d, 0x0040, 0x0042, 0x0045,
	0x0047, 0x0049, 0x004b, 0x004d, 0x004f, 0x0051, 0x0053, 0x0055, 0x0056, 0x0058, 0x005a, 0x005c, 0x005d, 0x005f, 0x0060, 0x0062,
	0x0063, 0x0065, 0x0066, 0x0068, 0x0069, 0x006a, 0x006c, 0x006d, 0x006e, 0x0070, 0x0071, 0x0072, 0x0073, 0x0075, 0x0076, 0x0077,
	0x0078, 0x0079, 0x007a, 0x007c, 0x007d, 0x007e, 0x007f, 0x0080, 0x0081, 0x0082, 0x0083, 0x0084, 0x0085, 0x0086, 0x0087, 0x0088,
	0x0089, 0x008a, 0x008b, 0x008c, 0x008d, 0x008e, 0x008f, 0x0090, 0x0091, 0x0092, 0x0093, 0x0094, 0x0094, 0x0095, 0x0096, 0x0097,
	0x0098, 0x0099, 0x009a, 0x009b, 0x009b, 0x009c, 0x009d, 0x009e, 0x009f, 0x009f, 0x00a0, 0x00a1, 0x00a2, 0x00a3, 0x00a3, 0x00a4,
	0x00a5, 0x00a6, 0x00a7, 0x00a7, 0x00a8, 0x00a9, 0x00aa, 0x00aa, 0x00ab, 0x00ac, 0x00ad, 0x00ad, 0x00ae, 0x00af, 0x00af, 0x00b0,
	0x00b1, 0x00b2, 0x00b2, 0x00b3, 0x00b4, 0x00b4, 0x00b5, 0x00b6, 0x00b6, 0x00b7, 0x00b8, 0x00b9, 0x00b9, 0x00ba, 0x00bb, 0x00bb,
	0x00bc, 0x00bd, 0x00bd, 0x00be, 0x00be, 0x00bf, 0x00c0, 0x00c0, 0x00c1, 0x00c2, 0x00c2, 0x00c3, 0x00c4, 0x00c4, 0x00c5, 0x00c5,
	0x00c6, 0x00c7, 0x00c7, 0x00c8, 0x00c8, 0x00c9, 0x00ca, 0x00ca, 0x00cb, 0x00cb, 0x00cc, 0x00cd, 0x00cd, 0x00ce, 0x00ce, 0x00cf,
	0x00d0, 0x00d0, 0x00d1, 0x00d1, 0x00d2, 0x00d2, 0x00d3, 0x00d4, 0x00d4, 0x00d5, 0x00d5, 0x00d6, 0x00d6, 0x00d7, 0x00d7, 0x00d8,
	0x00d8, 0x00d9, 0x00da, 0x00da, 0x00db, 0x00db, 0x00dc, 0x00dc, 0x00dd, 0x00dd, 0x00de, 0x00de, 0x00df, 0x00df, 0x00e0, 0x00e0,
	0x00e1, 0x00e2, 0x00e2, 0x00e3, 0x00e3, 0x00e4, 0x00e4, 0x00e5, 0x00e5, 0x00e6, 0x00e6, 0x00e7, 0x00e7, 0x00e8, 0x00e8, 0x00e9,
	0x00e9, 0x00ea, 0x00ea, 0x00eb, 0x00eb, 0x00ec, 0x00ec, 0x00ed, 0x00ed, 0x00ee, 0x00ee, 0x00ee, 0x00ef, 0x00ef, 0x00f0, 0x00f0,
	0x00f1, 0x00f1, 0x00f2, 0x00f2, 0x00f3, 0x00f3, 0x00f4, 0x00f4, 0x00f5, 0x00f5, 0x00f6, 0x00f6, 0x00f6, 0x00f7, 0x00f7, 0x00f8,
	0x00f8, 0x00f9, 0x00f9, 0x00fa, 0x00fa, 0x00fb, 0x00fb, 0x00fb, 0x00fc, 0x00fc, 0x00fd, 0x00fd, 0x00fe, 0x00fe, 0x00ff, 0x00ff,
};

static u32 gamma_lut_table_B[] = {
	0x0000, 0x000d, 0x0016, 0x001c, 0x0022, 0x0026, 0x002a, 0x002e, 0x0032, 0x0035, 0x0038, 0x003b, 0x003d, 0x0040, 0x0042, 0x0045,
	0x0047, 0x0049, 0x004b, 0x004d, 0x004f, 0x0051, 0x0053, 0x0055, 0x0056, 0x0058, 0x005a, 0x005c, 0x005d, 0x005f, 0x0060, 0x0062,
	0x0063, 0x0065, 0x0066, 0x0068, 0x0069, 0x006a, 0x006c, 0x006d, 0x006e, 0x0070, 0x0071, 0x0072, 0x0073, 0x0075, 0x0076, 0x0077,
	0x0078, 0x0079, 0x007a, 0x007c, 0x007d, 0x007e, 0x007f, 0x0080, 0x0081, 0x0082, 0x0083, 0x0084, 0x0085, 0x0086, 0x0087, 0x0088,
	0x0089, 0x008a, 0x008b, 0x008c, 0x008d, 0x008e, 0x008f, 0x0090, 0x0091, 0x0092, 0x0093, 0x0094, 0x0094, 0x0095, 0x0096, 0x0097,
	0x0098, 0x0099, 0x009a, 0x009b, 0x009b, 0x009c, 0x009d, 0x009e, 0x009f, 0x009f, 0x00a0, 0x00a1, 0x00a2, 0x00a3, 0x00a3, 0x00a4,
	0x00a5, 0x00a6, 0x00a7, 0x00a7, 0x00a8, 0x00a9, 0x00aa, 0x00aa, 0x00ab, 0x00ac, 0x00ad, 0x00ad, 0x00ae, 0x00af, 0x00af, 0x00b0,
	0x00b1, 0x00b2, 0x00b2, 0x00b3, 0x00b4, 0x00b4, 0x00b5, 0x00b6, 0x00b6, 0x00b7, 0x00b8, 0x00b9, 0x00b9, 0x00ba, 0x00bb, 0x00bb,
	0x00bc, 0x00bd, 0x00bd, 0x00be, 0x00be, 0x00bf, 0x00c0, 0x00c0, 0x00c1, 0x00c2, 0x00c2, 0x00c3, 0x00c4, 0x00c4, 0x00c5, 0x00c5,
	0x00c6, 0x00c7, 0x00c7, 0x00c8, 0x00c8, 0x00c9, 0x00ca, 0x00ca, 0x00cb, 0x00cb, 0x00cc, 0x00cd, 0x00cd, 0x00ce, 0x00ce, 0x00cf,
	0x00d0, 0x00d0, 0x00d1, 0x00d1, 0x00d2, 0x00d2, 0x00d3, 0x00d4, 0x00d4, 0x00d5, 0x00d5, 0x00d6, 0x00d6, 0x00d7, 0x00d7, 0x00d8,
	0x00d8, 0x00d9, 0x00da, 0x00da, 0x00db, 0x00db, 0x00dc, 0x00dc, 0x00dd, 0x00dd, 0x00de, 0x00de, 0x00df, 0x00df, 0x00e0, 0x00e0,
	0x00e1, 0x00e2, 0x00e2, 0x00e3, 0x00e3, 0x00e4, 0x00e4, 0x00e5, 0x00e5, 0x00e6, 0x00e6, 0x00e7, 0x00e7, 0x00e8, 0x00e8, 0x00e9,
	0x00e9, 0x00ea, 0x00ea, 0x00eb, 0x00eb, 0x00ec, 0x00ec, 0x00ed, 0x00ed, 0x00ee, 0x00ee, 0x00ee, 0x00ef, 0x00ef, 0x00f0, 0x00f0,
	0x00f1, 0x00f1, 0x00f2, 0x00f2, 0x00f3, 0x00f3, 0x00f4, 0x00f4, 0x00f5, 0x00f5, 0x00f6, 0x00f6, 0x00f6, 0x00f7, 0x00f7, 0x00f8,
	0x00f8, 0x00f9, 0x00f9, 0x00fa, 0x00fa, 0x00fb, 0x00fb, 0x00fb, 0x00fc, 0x00fc, 0x00fd, 0x00fd, 0x00fe, 0x00fe, 0x00ff, 0x00ff,
};

/*******************************************************************************
** IGM
*/
static u32 igm_lut_table_R[] = {
	0x0000, 0x0001, 0x0002, 0x0004, 0x0005, 0x0006, 0x0007, 0x0009, 0x000a, 0x000b, 0x000c, 0x000e, 0x000f, 0x0010, 0x0012, 0x0013,
	0x0015, 0x0017, 0x0019, 0x001b, 0x001d, 0x001f, 0x0021, 0x0023, 0x0025, 0x0028, 0x002a, 0x002d, 0x002f, 0x0032, 0x0035, 0x0038,
	0x003b, 0x003e, 0x0041, 0x0045, 0x0048, 0x004b, 0x004f, 0x0053, 0x0057, 0x005a, 0x005e, 0x0063, 0x0067, 0x006b, 0x006f, 0x0074,
	0x0079, 0x007d, 0x0082, 0x0087, 0x008c, 0x0091, 0x0097, 0x009c, 0x00a1, 0x00a7, 0x00ad, 0x00b2, 0x00b8, 0x00be, 0x00c5, 0x00cb,
	0x00d1, 0x00d8, 0x00de, 0x00e5, 0x00ec, 0x00f3, 0x00fa, 0x0101, 0x0108, 0x0110, 0x0117, 0x011f, 0x0127, 0x012f, 0x0137, 0x013f,
	0x0147, 0x0150, 0x0158, 0x0161, 0x016a, 0x0173, 0x017c, 0x0185, 0x018e, 0x0198, 0x01a1, 0x01ab, 0x01b5, 0x01bf, 0x01c9, 0x01d3,
	0x01dd, 0x01e8, 0x01f2, 0x01fd, 0x0208, 0x0213, 0x021e, 0x0229, 0x0235, 0x0240, 0x024c, 0x0258, 0x0264, 0x0270, 0x027c, 0x0289,
	0x0295, 0x02a2, 0x02af, 0x02bb, 0x02c9, 0x02d6, 0x02e3, 0x02f1, 0x02fe, 0x030c, 0x031a, 0x0328, 0x0336, 0x0345, 0x0353, 0x0362,
	0x0371, 0x0380, 0x038f, 0x039e, 0x03ad, 0x03bd, 0x03cd, 0x03dd, 0x03ed, 0x03fd, 0x040d, 0x041d, 0x042e, 0x043f, 0x0450, 0x0461,
	0x0472, 0x0483, 0x0495, 0x04a6, 0x04b8, 0x04ca, 0x04dc, 0x04ef, 0x0501, 0x0514, 0x0526, 0x0539, 0x054c, 0x0560, 0x0573, 0x0587,
	0x059a, 0x05ae, 0x05c2, 0x05d6, 0x05eb, 0x05ff, 0x0614, 0x0629, 0x063e, 0x0653, 0x0668, 0x067e, 0x0693, 0x06a9, 0x06bf, 0x06d5,
	0x06eb, 0x0702, 0x0718, 0x072f, 0x0746, 0x075d, 0x0775, 0x078c, 0x07a4, 0x07bb, 0x07d3, 0x07eb, 0x0804, 0x081c, 0x0835, 0x084e,
	0x0867, 0x0880, 0x0899, 0x08b3, 0x08cc, 0x08e6, 0x0900, 0x091a, 0x0935, 0x094f, 0x096a, 0x0985, 0x09a0, 0x09bb, 0x09d6, 0x09f2,
	0x0a0d, 0x0a29, 0x0a45, 0x0a62, 0x0a7e, 0x0a9b, 0x0ab8, 0x0ad5, 0x0af2, 0x0b0f, 0x0b2c, 0x0b4a, 0x0b68, 0x0b86, 0x0ba4, 0x0bc3,
	0x0be1, 0x0c00, 0x0c1f, 0x0c3e, 0x0c5d, 0x0c7d, 0x0c9c, 0x0cbc, 0x0cdc, 0x0cfd, 0x0d1d, 0x0d3e, 0x0d5e, 0x0d7f, 0x0da0, 0x0dc2,
	0x0de3, 0x0e05, 0x0e27, 0x0e49, 0x0e6b, 0x0e8d, 0x0eb0, 0x0ed3, 0x0ef6, 0x0f19, 0x0f3c, 0x0f60, 0x0f84, 0x0fa8, 0x0fcc, 0x0ff0,
};

static u32 igm_lut_table_G[] = {
	0x0000, 0x0001, 0x0002, 0x0004, 0x0005, 0x0006, 0x0007, 0x0009, 0x000a, 0x000b, 0x000c, 0x000e, 0x000f, 0x0010, 0x0012, 0x0013,
	0x0015, 0x0017, 0x0019, 0x001b, 0x001d, 0x001f, 0x0021, 0x0023, 0x0025, 0x0028, 0x002a, 0x002d, 0x002f, 0x0032, 0x0035, 0x0038,
	0x003b, 0x003e, 0x0041, 0x0045, 0x0048, 0x004b, 0x004f, 0x0053, 0x0057, 0x005a, 0x005e, 0x0063, 0x0067, 0x006b, 0x006f, 0x0074,
	0x0079, 0x007d, 0x0082, 0x0087, 0x008c, 0x0091, 0x0097, 0x009c, 0x00a1, 0x00a7, 0x00ad, 0x00b2, 0x00b8, 0x00be, 0x00c5, 0x00cb,
	0x00d1, 0x00d8, 0x00de, 0x00e5, 0x00ec, 0x00f3, 0x00fa, 0x0101, 0x0108, 0x0110, 0x0117, 0x011f, 0x0127, 0x012f, 0x0137, 0x013f,
	0x0147, 0x0150, 0x0158, 0x0161, 0x016a, 0x0173, 0x017c, 0x0185, 0x018e, 0x0198, 0x01a1, 0x01ab, 0x01b5, 0x01bf, 0x01c9, 0x01d3,
	0x01dd, 0x01e8, 0x01f2, 0x01fd, 0x0208, 0x0213, 0x021e, 0x0229, 0x0235, 0x0240, 0x024c, 0x0258, 0x0264, 0x0270, 0x027c, 0x0289,
	0x0295, 0x02a2, 0x02af, 0x02bb, 0x02c9, 0x02d6, 0x02e3, 0x02f1, 0x02fe, 0x030c, 0x031a, 0x0328, 0x0336, 0x0345, 0x0353, 0x0362,
	0x0371, 0x0380, 0x038f, 0x039e, 0x03ad, 0x03bd, 0x03cd, 0x03dd, 0x03ed, 0x03fd, 0x040d, 0x041d, 0x042e, 0x043f, 0x0450, 0x0461,
	0x0472, 0x0483, 0x0495, 0x04a6, 0x04b8, 0x04ca, 0x04dc, 0x04ef, 0x0501, 0x0514, 0x0526, 0x0539, 0x054c, 0x0560, 0x0573, 0x0587,
	0x059a, 0x05ae, 0x05c2, 0x05d6, 0x05eb, 0x05ff, 0x0614, 0x0629, 0x063e, 0x0653, 0x0668, 0x067e, 0x0693, 0x06a9, 0x06bf, 0x06d5,
	0x06eb, 0x0702, 0x0718, 0x072f, 0x0746, 0x075d, 0x0775, 0x078c, 0x07a4, 0x07bb, 0x07d3, 0x07eb, 0x0804, 0x081c, 0x0835, 0x084e,
	0x0867, 0x0880, 0x0899, 0x08b3, 0x08cc, 0x08e6, 0x0900, 0x091a, 0x0935, 0x094f, 0x096a, 0x0985, 0x09a0, 0x09bb, 0x09d6, 0x09f2,
	0x0a0d, 0x0a29, 0x0a45, 0x0a62, 0x0a7e, 0x0a9b, 0x0ab8, 0x0ad5, 0x0af2, 0x0b0f, 0x0b2c, 0x0b4a, 0x0b68, 0x0b86, 0x0ba4, 0x0bc3,
	0x0be1, 0x0c00, 0x0c1f, 0x0c3e, 0x0c5d, 0x0c7d, 0x0c9c, 0x0cbc, 0x0cdc, 0x0cfd, 0x0d1d, 0x0d3e, 0x0d5e, 0x0d7f, 0x0da0, 0x0dc2,
	0x0de3, 0x0e05, 0x0e27, 0x0e49, 0x0e6b, 0x0e8d, 0x0eb0, 0x0ed3, 0x0ef6, 0x0f19, 0x0f3c, 0x0f60, 0x0f84, 0x0fa8, 0x0fcc, 0x0ff0,
};

static u32 igm_lut_table_B[] = {
	0x0000, 0x0001, 0x0002, 0x0004, 0x0005, 0x0006, 0x0007, 0x0009, 0x000a, 0x000b, 0x000c, 0x000e, 0x000f, 0x0010, 0x0012, 0x0013,
	0x0015, 0x0017, 0x0019, 0x001b, 0x001d, 0x001f, 0x0021, 0x0023, 0x0025, 0x0028, 0x002a, 0x002d, 0x002f, 0x0032, 0x0035, 0x0038,
	0x003b, 0x003e, 0x0041, 0x0045, 0x0048, 0x004b, 0x004f, 0x0053, 0x0057, 0x005a, 0x005e, 0x0063, 0x0067, 0x006b, 0x006f, 0x0074,
	0x0079, 0x007d, 0x0082, 0x0087, 0x008c, 0x0091, 0x0097, 0x009c, 0x00a1, 0x00a7, 0x00ad, 0x00b2, 0x00b8, 0x00be, 0x00c5, 0x00cb,
	0x00d1, 0x00d8, 0x00de, 0x00e5, 0x00ec, 0x00f3, 0x00fa, 0x0101, 0x0108, 0x0110, 0x0117, 0x011f, 0x0127, 0x012f, 0x0137, 0x013f,
	0x0147, 0x0150, 0x0158, 0x0161, 0x016a, 0x0173, 0x017c, 0x0185, 0x018e, 0x0198, 0x01a1, 0x01ab, 0x01b5, 0x01bf, 0x01c9, 0x01d3,
	0x01dd, 0x01e8, 0x01f2, 0x01fd, 0x0208, 0x0213, 0x021e, 0x0229, 0x0235, 0x0240, 0x024c, 0x0258, 0x0264, 0x0270, 0x027c, 0x0289,
	0x0295, 0x02a2, 0x02af, 0x02bb, 0x02c9, 0x02d6, 0x02e3, 0x02f1, 0x02fe, 0x030c, 0x031a, 0x0328, 0x0336, 0x0345, 0x0353, 0x0362,
	0x0371, 0x0380, 0x038f, 0x039e, 0x03ad, 0x03bd, 0x03cd, 0x03dd, 0x03ed, 0x03fd, 0x040d, 0x041d, 0x042e, 0x043f, 0x0450, 0x0461,
	0x0472, 0x0483, 0x0495, 0x04a6, 0x04b8, 0x04ca, 0x04dc, 0x04ef, 0x0501, 0x0514, 0x0526, 0x0539, 0x054c, 0x0560, 0x0573, 0x0587,
	0x059a, 0x05ae, 0x05c2, 0x05d6, 0x05eb, 0x05ff, 0x0614, 0x0629, 0x063e, 0x0653, 0x0668, 0x067e, 0x0693, 0x06a9, 0x06bf, 0x06d5,
	0x06eb, 0x0702, 0x0718, 0x072f, 0x0746, 0x075d, 0x0775, 0x078c, 0x07a4, 0x07bb, 0x07d3, 0x07eb, 0x0804, 0x081c, 0x0835, 0x084e,
	0x0867, 0x0880, 0x0899, 0x08b3, 0x08cc, 0x08e6, 0x0900, 0x091a, 0x0935, 0x094f, 0x096a, 0x0985, 0x09a0, 0x09bb, 0x09d6, 0x09f2,
	0x0a0d, 0x0a29, 0x0a45, 0x0a62, 0x0a7e, 0x0a9b, 0x0ab8, 0x0ad5, 0x0af2, 0x0b0f, 0x0b2c, 0x0b4a, 0x0b68, 0x0b86, 0x0ba4, 0x0bc3,
	0x0be1, 0x0c00, 0x0c1f, 0x0c3e, 0x0c5d, 0x0c7d, 0x0c9c, 0x0cbc, 0x0cdc, 0x0cfd, 0x0d1d, 0x0d3e, 0x0d5e, 0x0d7f, 0x0da0, 0x0dc2,
	0x0de3, 0x0e05, 0x0e27, 0x0e49, 0x0e6b, 0x0e8d, 0x0eb0, 0x0ed3, 0x0ef6, 0x0f19, 0x0f3c, 0x0f60, 0x0f84, 0x0fa8, 0x0fcc, 0x0ff0,
};

/*******************************************************************************
** GMT
*/
static u32 gmp_lut_table_low32bit[9][9][9] = {
	{
		{0x00000000, 0x000161ca, 0x0002d393, 0x0004355d, 0x00059727, 0x0006f8f0, 0x00086aba, 0x0009cc84, 0x000b1e3f, },
		{0x221dc018, 0x1c1f21e2, 0x162083ab, 0x1021e575, 0x0a23573f, 0x0424b908, 0x00261ad2, 0x00277c9c, 0x0028de57, },
		{0x443b7030, 0x3e3cd1f9, 0x383e43c3, 0x333fa58d, 0x2d410756, 0x27426920, 0x2143daea, 0x1b453cb3, 0x15469e6f, },
		{0x67593048, 0x615a9211, 0x5b5bf3db, 0x555d65a5, 0x4f5ec76e, 0x49602938, 0x43618b02, 0x3d62fccb, 0x37644e87, },
		{0x8976e060, 0x83785229, 0x7d79b3f3, 0x777b15bd, 0x717c7786, 0x6b7de950, 0x657f4b1a, 0x5f80ace3, 0x59820e9f, },
		{0xab94a077, 0xa5960241, 0x9f97640b, 0x9998d5d4, 0x939a379e, 0x8d9b9968, 0x879cfb32, 0x819e6cfb, 0x7b9fbeb7, },
		{0xcdb2508f, 0xc7b3c259, 0xc1b52423, 0xbbb685ec, 0xb5b7e7b6, 0xafb95980, 0xa9babb49, 0xa3bc1d13, 0x9ebd7ece, },
		{0xefd010a7, 0xe9d17271, 0xe3d2e43b, 0xddd44604, 0xd8d5a7ce, 0xd2d70998, 0xccd87b61, 0xc6d9dd2b, 0xc0db2ee6, },
		{0x10ece0be, 0x0bee4288, 0x05efa452, 0xfff1161b, 0xf9f277e5, 0xf3f3d9af, 0xedf53b78, 0xe7f6ad42, 0xe1f7fefd, },
	},
	{
		{0x14003006, 0x0e01a1d0, 0x0803039a, 0x02046563, 0xfc05c72d, 0xf60738f7, 0xf0089ac0, 0xea09fc8a, 0xe50b5e45, },
		{0x361df01e, 0x301f51e8, 0x2a20b3b1, 0x2422257b, 0x1f238745, 0x1924e90e, 0x13265ad8, 0x0d27bca2, 0x07290e5d, },
		{0x593ba036, 0x533d1200, 0x4d3e73c9, 0x473fd593, 0x4141475d, 0x3b42a926, 0x35440af0, 0x2f456cba, 0x2946ce75, },
		{0x7b59604e, 0x755ac218, 0x6f5c33e1, 0x695d95ab, 0x635ef775, 0x5d60593e, 0x5761cb08, 0x51632cd2, 0x4b647e8d, },
		{0x9d772066, 0x9778822f, 0x9179e3f9, 0x8b7b45c3, 0x857cb78c, 0x7f7e1956, 0x797f7b20, 0x7380dce9, 0x6d823ea5, },
		{0xbf94d07e, 0xb9963247, 0xb397a411, 0xad9905db, 0xa79a67a4, 0xa19bd96e, 0x9b9d3b38, 0x959e9d01, 0x909ffebd, },
		{0xe1b29096, 0xdbb3f25f, 0xd5b55429, 0xcfb6c5f3, 0xc9b827bc, 0xc4b98986, 0xbebaeb50, 0xb8bc5d19, 0xb2bdaed5, },
		{0x04d040ad, 0xfed1b277, 0xf8d31441, 0xf2d4760a, 0xecd5d7d4, 0xe6d7499e, 0xe0d8ab67, 0xdada0d31, 0xd4db6eed, },
		{0x25ed10c5, 0x1fee728e, 0x19efe458, 0x13f14622, 0x0df2a7eb, 0x07f409b5, 0x01f57b7f, 0xfbf6dd48, 0xf5f82f04, },
	},
	{
		{0x2800700c, 0x2201d1d6, 0x1c0333a0, 0x16049569, 0x10060733, 0x0b0768fd, 0x0508cac6, 0xff0a3c90, 0xf90b8e4b, },
		{0x4b1e2024, 0x451f91ee, 0x3f20f3b8, 0x39225581, 0x3323b74b, 0x2d252915, 0x27268ade, 0x2127eca8, 0x1b294e63, },
		{0x6d3be03c, 0x673d4206, 0x613ea3d0, 0x5b401599, 0x55417763, 0x4f42d92d, 0x49443af6, 0x4345acc0, 0x3d46fe7b, },
		{0x8f599054, 0x895b021e, 0x835c63e7, 0x7d5dc5b1, 0x775f277b, 0x71609944, 0x6b61fb0e, 0x65635cd8, 0x5f64be93, },
		{0xb177506c, 0xab78b236, 0xa57a13ff, 0x9f7b85c9, 0x997ce793, 0x937e495c, 0x8d7fbb26, 0x87811cf0, 0x82826eab, },
		{0xd3951084, 0xcd96724e, 0xc797d417, 0xc19935e1, 0xbb9aa7ab, 0xb59c0974, 0xb09d6b3e, 0xaa9ecd08, 0xa4a02ec3, },
		{0xf5b2c09c, 0xf0b42265, 0xeab5942f, 0xe4b6f5f9, 0xdeb857c2, 0xd8b9b98c, 0xd2bb2b56, 0xccbc8d1f, 0xc6bdeedb, },
		{0x18d080b4, 0x12d1e27d, 0x0cd34447, 0x06d4a611, 0x00d617da, 0xfad779a4, 0xf4d8db6e, 0xeeda4d37, 0xe8db9ef3, },
		{0x39ed40cb, 0x33eeb294, 0x2df0145e, 0x27f17628, 0x21f2d7f2, 0x1bf449bb, 0x15f5ab85, 0x0ff70d4f, 0x09f86f0a, },
	},
	{
		{0x3c00a013, 0x370201dc, 0x310373a6, 0x2b04d570, 0x25063739, 0x1f079903, 0x19090acd, 0x130a6c96, 0x0d0bbe52, },
		{0x5f1e602a, 0x591fc1f4, 0x532123be, 0x4d228588, 0x4723f751, 0x4125591b, 0x3b26bae5, 0x35281cae, 0x2f297e6a, },
		{0x813c1042, 0x7b3d720c, 0x753ee3d6, 0x6f40459f, 0x6941a769, 0x63431933, 0x5d447afc, 0x5745dcc6, 0x51473e81, },
		{0xa359d05a, 0x9d5b3224, 0x975c93ee, 0x915e05b7, 0x8b5f6781, 0x8560c94b, 0x7f622b14, 0x79639cde, 0x7464ee99, },
		{0xc5778072, 0xbf78f23c, 0xb97a5406, 0xb37bb5cf, 0xad7d1799, 0xa77e8963, 0xa17feb2c, 0x9c814cf6, 0x9682aeb1, },
		{0xe795408a, 0xe196a254, 0xdc98041d, 0xd69975e7, 0xd09ad7b1, 0xca9c397a, 0xc49d9b44, 0xbe9f0d0e, 0xb8a05ec9, },
		{0x0ab2f0a2, 0x04b4626c, 0xfeb5c435, 0xf8b725ff, 0xf2b897c9, 0xecb9f992, 0xe6bb5b5c, 0xe0bcbd26, 0xdabe1ee1, },
		{0x2cd0b0ba, 0x26d21284, 0x20d3844d, 0x1ad4e617, 0x14d647e1, 0x0ed7a9aa, 0x08d91b74, 0x02da7d3e, 0xfcdbcef9, },
		{0x4ded80d1, 0x47eee29b, 0x41f04464, 0x3bf1b62e, 0x35f317f8, 0x2ff479c1, 0x29f5db8b, 0x23f74d55, 0x1df89f10, },
	},
	{
		{0x5100d019, 0x4b0241e2, 0x4503a3ac, 0x3f050576, 0x3906673f, 0x3307d909, 0x2d093ad3, 0x270a9c9c, 0x210bfe58, },
		{0x731e9031, 0x6d1ff1fa, 0x672153c4, 0x6122c58e, 0x5b242757, 0x55258921, 0x4f26faeb, 0x49285cb4, 0x4329ae70, },
		{0x953c5049, 0x8f3db212, 0x893f13dc, 0x834075a6, 0x7d41e76f, 0x77434939, 0x7144ab03, 0x6b460ccc, 0x66476e88, },
		{0xb75a0060, 0xb15b622a, 0xab5cd3f4, 0xa55e35bd, 0x9f5f9787, 0x9960f951, 0x93626b1b, 0x8d63cce4, 0x88652ea0, },
		{0xd977c078, 0xd3792242, 0xcd7a840c, 0xc87be5d5, 0xc27d579f, 0xbc7eb969, 0xb6801b32, 0xb0818cfc, 0xaa82deb7, },
		{0xfc957090, 0xf696d25a, 0xf0984424, 0xea99a5ed, 0xe49b07b7, 0xde9c7981, 0xd89ddb4a, 0xd29f3d14, 0xcca09ecf, },
		{0x1eb330a8, 0x18b49272, 0x12b5f43c, 0x0cb76605, 0x06b8c7cf, 0x00ba2999, 0xfabb8b62, 0xf4bcfd2c, 0xeebe4ee7, },
		{0x40d0e0c0, 0x3ad2528a, 0x34d3b453, 0x2ed5161d, 0x28d677e7, 0x22d7e9b0, 0x1cd94b7a, 0x16daad44, 0x10dc0eff, },
		{0x61edb0d7, 0x5bef12a1, 0x55f0846b, 0x4ff1e634, 0x49f347fe, 0x43f4a9c8, 0x3df61b91, 0x37f77d5b, 0x32f8df16, },
	},
	{
		{0x6501101f, 0x5f0271e9, 0x5903d3b2, 0x5305457c, 0x4d06a746, 0x4708090f, 0x41096ad9, 0x3b0adca3, 0x350c2e5e, },
		{0x871ec037, 0x81203201, 0x7b2193ca, 0x7522f594, 0x6f24575e, 0x6925c927, 0x63272af1, 0x5d288cbb, 0x5729ee76, },
		{0xa93c804f, 0xa33de218, 0x9d3f43e2, 0x9740b5ac, 0x91421775, 0x8b43793f, 0x8544db09, 0x7f464cd2, 0x7a479e8e, },
		{0xcb5a3067, 0xc55ba230, 0xbf5d03fa, 0xb95e65c4, 0xb45fc78d, 0xae613957, 0xa8629b21, 0xa263fcea, 0x9c655ea6, },
		{0xee77f07f, 0xe8795248, 0xe27ac412, 0xdc7c25dc, 0xd67d87a5, 0xd07ee96f, 0xca805b39, 0xc481bd02, 0xbe830ebe, },
		{0x1095b096, 0x0a971260, 0x0498742a, 0xfe99d5f3, 0xf89b47bd, 0xf29ca987, 0xec9e0b50, 0xe69f6d1a, 0xe0a0ced6, },
		{0x32b360ae, 0x2cb4c278, 0x26b63442, 0x20b7960b, 0x1ab8f7d5, 0x14ba599f, 0x0ebbcb68, 0x08bd2d32, 0x02be8eed, },
		{0x54d120c6, 0x4ed28290, 0x48d3e45a, 0x42d54623, 0x3cd6b7ed, 0x36d819b7, 0x30d97b80, 0x2adaed4a, 0x25dc3f05, },
		{0x75ede0dd, 0x6fef52a7, 0x69f0b471, 0x63f2163a, 0x5df37804, 0x57f4e9ce, 0x52f64b97, 0x4cf7ad61, 0x46f90f1c, },
	},
	{
		{0x79014025, 0x7302a1ef, 0x6d0413b9, 0x67057582, 0x6106d74c, 0x5b083916, 0x5509aadf, 0x4f0b0ca9, 0x490c5e64, },
		{0x9b1f003d, 0x95206207, 0x8f21c3d0, 0x8923259a, 0x83249764, 0x7d25f92d, 0x77275af7, 0x7128bcc1, 0x6c2a1e7c, },
		{0xbd3cb055, 0xb73e121f, 0xb13f83e8, 0xab40e5b2, 0xa542477c, 0xa043b945, 0x9a451b0f, 0x94467cd9, 0x8e47de94, },
		{0xe05a706d, 0xda5bd237, 0xd45d3400, 0xce5ea5ca, 0xc8600794, 0xc261695d, 0xbc62cb27, 0xb6643cf1, 0xb0658eac, },
		{0x02782085, 0xfc79924e, 0xf67af418, 0xf07c55e2, 0xea7db7ab, 0xe47f2975, 0xde808b3f, 0xd881ed08, 0xd2834ec4, },
		{0x2495e09d, 0x1e974266, 0x1898a430, 0x129a15fa, 0x0c9b77c3, 0x069cd98d, 0x009e4b57, 0xfa9fad20, 0xf4a0fedc, },
		{0x46b390b5, 0x40b5027e, 0x3ab66448, 0x34b7c612, 0x2eb937db, 0x28ba99a5, 0x22bbfb6f, 0x1cbd5d38, 0x17bebef4, },
		{0x68d150cc, 0x62d2b296, 0x5cd42460, 0x56d58629, 0x50d6e7f3, 0x4bd849bd, 0x45d9bb86, 0x3fdb1d50, 0x39dc6f0c, },
		{0x89ee20e4, 0x83ef82ad, 0x7ef0e477, 0x78f25641, 0x72f3b80a, 0x6cf519d4, 0x66f67b9e, 0x60f7ed67, 0x5af93f23, },
	},
	{
		{0x8d01702b, 0x8702e1f5, 0x810443bf, 0x7b05a588, 0x75070752, 0x6f08791c, 0x6909dae5, 0x630b3caf, 0x5e0c9e6a, },
		{0xaf1f3043, 0xa920920d, 0xa321f3d7, 0x9d2365a0, 0x9724c76a, 0x91262934, 0x8c279afd, 0x8628fcc7, 0x802a4e82, },
		{0xd13cf05b, 0xcc3e5225, 0xc63fb3ef, 0xc04115b8, 0xba428782, 0xb443e94c, 0xae454b15, 0xa846acdf, 0xa2480e9a, },
		{0xf45aa073, 0xee5c023d, 0xe85d7406, 0xe25ed5d0, 0xdc60379a, 0xd6619963, 0xd0630b2d, 0xca646cf7, 0xc465ceb2, },
		{0x1678608b, 0x1079c255, 0x0a7b241e, 0x047c85e8, 0xfe7df7b2, 0xf87f597b, 0xf280bb45, 0xec822d0f, 0xe6837eca, },
		{0x389610a3, 0x3297826d, 0x2c98e436, 0x269a4600, 0x209ba7ca, 0x1a9d1993, 0x149e7b5d, 0x0e9fdd27, 0x09a13ee2, },
		{0x5ab3d0bb, 0x54b53284, 0x4eb6944e, 0x48b80618, 0x42b967e1, 0x3cbac9ab, 0x37bc2b75, 0x31bd9d3e, 0x2bbeeefa, },
		{0x7cd180d3, 0x76d2f29c, 0x71d45466, 0x6bd5b630, 0x65d717f9, 0x5fd889c3, 0x59d9eb8d, 0x53db4d56, 0x4ddcaf12, },
		{0x9eee50ea, 0x98efb2b3, 0x92f1247d, 0x8cf28647, 0x86f3e810, 0x80f549da, 0x7af6bba4, 0x74f81d6e, 0x6ef97f29, },
	},
	{
		{0xf001b031, 0xf00311fb, 0xf00473c5, 0xf005d58e, 0xf0074758, 0xf008a922, 0xf00a0aeb, 0xf00b7cb5, 0xf00cce70, },
		{0xf01f6049, 0xf020c213, 0xf02233dd, 0xf02395a6, 0xf024f770, 0xf026693a, 0xf027cb03, 0xf0292ccd, 0xf02a8e88, },
		{0xf03d2061, 0xf03e822b, 0xf03fe3f5, 0xf04155be, 0xf042b788, 0xf0441952, 0xf0457b1b, 0xf046ece5, 0xf0483ea0, },
		{0xf05ad079, 0xf05c4243, 0xf05da40c, 0xf05f05d6, 0xf06067a0, 0xf061d969, 0xf0633b33, 0xf0649cfd, 0xf065feb8, },
		{0xf0789091, 0xf079f25b, 0xf07b5424, 0xf07cc5ee, 0xf07e27b8, 0xf07f8981, 0xf080fb4b, 0xf0825d15, 0xf083aed0, },
		{0xf09640a9, 0xf097b273, 0xf099143c, 0xf09a7606, 0xf09be7d0, 0xf09d4999, 0xf09eab63, 0xf0a00d2d, 0xf0a16ee8, },
		{0xf0b400c1, 0xf0b5628a, 0xf0b6d454, 0xf0b8361e, 0xf0b997e7, 0xf0baf9b1, 0xf0bc6b7b, 0xf0bdcd44, 0xf0bf1f00, },
		{0xf0d1c0d9, 0xf0d322a2, 0xf0d4846c, 0xf0d5e636, 0xf0d757ff, 0xf0d8b9c9, 0xf0da1b93, 0xf0db7d5c, 0xf0dcdf18, },
		{0xf0ee80f0, 0xf0eff2b9, 0xf0f15483, 0xf0f2b64d, 0xf0f41816, 0xf0f589e0, 0xf0f6ebaa, 0xf0f84d74, 0xf0f9af2f, },
	},
};

static u32 gmp_lut_table_high4bit[9][9][9] = {
	{
		{0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, },
		{0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, },
		{0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, },
		{0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, },
		{0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, },
		{0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, },
		{0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, },
		{0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, },
		{0x1, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, },
	},
	{
		{0x2, 0x2, 0x2, 0x2, 0x1, 0x1, 0x1, 0x1, 0x1, },
		{0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, },
		{0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, },
		{0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, },
		{0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, },
		{0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, },
		{0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, },
		{0x3, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, 0x2, },
		{0x3, 0x3, 0x3, 0x3, 0x3, 0x3, 0x3, 0x2, 0x2, },
	},
	{
		{0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x3, 0x3, },
		{0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, },
		{0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, },
		{0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, },
		{0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, },
		{0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, },
		{0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, 0x4, },
		{0x5, 0x5, 0x5, 0x5, 0x5, 0x4, 0x4, 0x4, 0x4, },
		{0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, 0x5, },
	},
	{
		{0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, },
		{0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, },
		{0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, },
		{0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, },
		{0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, },
		{0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, },
		{0x7, 0x7, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, 0x6, },
		{0x7, 0x7, 0x7, 0x7, 0x7, 0x7, 0x7, 0x7, 0x6, },
		{0x7, 0x7, 0x7, 0x7, 0x7, 0x7, 0x7, 0x7, 0x7, },
	},
	{
		{0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, },
		{0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, },
		{0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, },
		{0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, },
		{0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, },
		{0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, 0x8, },
		{0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x8, 0x8, 0x8, },
		{0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, },
		{0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, },
	},
	{
		{0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, },
		{0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, },
		{0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, },
		{0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, },
		{0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, },
		{0xb, 0xb, 0xb, 0xa, 0xa, 0xa, 0xa, 0xa, 0xa, },
		{0xb, 0xb, 0xb, 0xb, 0xb, 0xb, 0xb, 0xb, 0xb, },
		{0xb, 0xb, 0xb, 0xb, 0xb, 0xb, 0xb, 0xb, 0xb, },
		{0xb, 0xb, 0xb, 0xb, 0xb, 0xb, 0xb, 0xb, 0xb, },
	},
	{
		{0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, },
		{0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, },
		{0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, },
		{0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, },
		{0xd, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, 0xc, },
		{0xd, 0xd, 0xd, 0xd, 0xd, 0xd, 0xd, 0xc, 0xc, },
		{0xd, 0xd, 0xd, 0xd, 0xd, 0xd, 0xd, 0xd, 0xd, },
		{0xd, 0xd, 0xd, 0xd, 0xd, 0xd, 0xd, 0xd, 0xd, },
		{0xd, 0xd, 0xd, 0xd, 0xd, 0xd, 0xd, 0xd, 0xd, },
	},
	{
		{0xe, 0xe, 0xe, 0xe, 0xe, 0xe, 0xe, 0xe, 0xe, },
		{0xe, 0xe, 0xe, 0xe, 0xe, 0xe, 0xe, 0xe, 0xe, },
		{0xe, 0xe, 0xe, 0xe, 0xe, 0xe, 0xe, 0xe, 0xe, },
		{0xe, 0xe, 0xe, 0xe, 0xe, 0xe, 0xe, 0xe, 0xe, },
		{0xf, 0xf, 0xf, 0xf, 0xe, 0xe, 0xe, 0xe, 0xe, },
		{0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, },
		{0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, },
		{0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, },
		{0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, },
	},
	{
		{0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, },
		{0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, },
		{0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, },
		{0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, },
		{0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, },
		{0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, },
		{0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, },
		{0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, },
		{0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, 0xf, },
	},
};

/*******************************************************************************
** XCC
*/
static u32 xcc_table[12] = {0x0, 0x8000, 0x0,0x0,0x0,0x0,0x8000,0x0,0x0,0x0,0x0,0x8000,};

/*******************************************************************************
**
*/

static int btv_i2c_write_u8(u8 addr,u8 val)
{
	int ret = 0;
	u8 write_buf[2];
	struct i2c_client *client = g_sony_client;
	struct i2c_msg msgs[] = {
		{
			.addr = client->addr,
			.flags = client->flags & I2C_M_TEN,
			.len = sizeof(write_buf),
			.buf = write_buf,
		},
	};
	write_buf[0] = addr;
	write_buf[1] = val;

	ret = i2c_transfer(client->adapter, msgs, 1);
	if(ret != 1){
		HISI_FB_ERR("write transfer error\n");
		ret = -EIO;
	} else {
		ret = 0;
	}
	return ret;
}

static int btv_i2c_read_u8(u8 addr,u8* val)
{
	int ret = 0;
	struct i2c_client *client = g_sony_client;
	u8 read_buf[2];
	struct i2c_msg  msgs[] = {
		{
			.addr = client->addr,
			.flags = client->flags & I2C_M_TEN,
			.len = 1,
			.buf = read_buf,
		},
		{
			.addr = client->addr,
			.flags = (client->flags & I2C_M_TEN) | I2C_M_RD,
			.len = 1,
			.buf = val,
		},
	};
	read_buf[0] = addr;
	ret = i2c_transfer(client->adapter, msgs, 2);
	if (ret != 2) {
		HISI_FB_ERR("read transfer error\n");
		ret = -EIO;
	} else {
		ret = 0;
	}
	return ret;
}



static ssize_t mipi_lp8556_read_show(struct device *dev, struct device_attribute *attr, char *buf)
{
	int ret  = -1;
	ret = snprintf(buf, PAGE_SIZE,"reg:0x%x = 0x%x\n",lp8556_reg_addr,lp8556_reg_value);
	return ret;
}

static ssize_t mipi_lp8556_write_store(struct device *dev, struct device_attribute *attr, const char *buf, size_t size)
{
	int ret  = -1;
	unsigned long flag = 0xFF;
	u8 value = 0;
	ret = sscanf(buf,"%1d", &flag);
	if(ret < 0) {
		HISI_FB_ERR("%s: input value is error, ret = %d.\n",ret);
		return -EINVAL;
	}

	if(0 == flag){//read
		ret = sscanf(buf,"%1d %2x", &flag,&lp8556_reg_addr);
		if (ret < 0) {
			HISI_FB_ERR("%s: input value is error, ret = %d.\n",ret);
			return -EINVAL;
		}
		btv_i2c_read_u8(lp8556_reg_addr,&lp8556_reg_value);
	}else if(1 == flag){ //write
		ret = sscanf(buf,"%1d %2x %2x", &flag,&lp8556_reg_addr,&value);
		if (ret < 0) {
			HISI_FB_ERR("%s: input value is error, ret = %d.\n",ret);
			return -EINVAL;
		}
		btv_i2c_write_u8(lp8556_reg_addr,value);
	}else{
		HISI_FB_ERR("%s: input value is error, flag = %ld.\n",flag);
	}
	return size;
}

static struct device_attribute attributes[] = {
	__ATTR(ipc_i2c_read_write, 0664, mipi_lp8556_read_show, mipi_lp8556_write_store),
};

static int add_sysfs_interfaces(struct device *dev)
{
	int i = 0;

	for (i = 0; i < ARRAY_SIZE(attributes); i++) {
		if (device_create_file(dev, attributes + i)) {
			HISI_FB_ERR("%s: %s create fail\n", __func__,attributes[i].attr.name);
			goto undo;
		}
	}

	return 0;
undo:
	for (i--; i >= 0; i--)
		device_remove_file(dev, attributes + i);
		HISI_FB_ERR("%s: failed to create sysfs interface\n", __func__);
	return -ENODEV;
}

static struct btv_register_data lp8556_btv_init_cmd[]={
	{0x01,0x81},
	{0xA0,0xFF},
	{0xA1,0xBF},
	{0xA2,0x28},
	{0xA3,0x02},
	{0xA4,0x72},
	{0xA5,0x20},
	{0xA6,0x80},
	{0xA7,0xF7},
	{0xA9,0x60},
	{0xAA,0x0F},
	{0xAE,0x0E},
	{0x9E,0x22},
	{0x16,0x0F},
};

static struct btv_register_data lp8556_slope_on={
	0xA3,
	0x42,
};

static int lp8556_btv_init(void)
{
	HISI_FB_INFO("[I2C]lp8556_btv_init");

	int ret=0;
	u8 value=0;
	int length,i;
	length = sizeof(lp8556_btv_init_cmd)/sizeof(struct btv_register_data);
	for(i = 0;i<length;i++){
		ret = btv_i2c_write_u8(lp8556_btv_init_cmd[i].reg,lp8556_btv_init_cmd[i].value);
		if(ret < 0){
			HISI_FB_ERR("[ERR] :register[%d] = 0x%x,value = 0x%x.\n",i,lp8556_btv_init_cmd[i].reg, lp8556_btv_init_cmd[i].value);
			break;
		}
	}

	udelay(200);

	ret = btv_i2c_read_u8(LP8556_STATUS_REG,&value);
	HISI_FB_INFO("reg = 0x%x ,ret = %d,value = 0x%x.\n",LP8556_STATUS_REG,ret,value);

	return ret;
}


static int mipi_tianma_R63319_8p4_panel_set_fastboot(struct platform_device *pdev)
{
	struct hisi_fb_data_type *hisifd = NULL;

	if (NULL == pdev) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	hisifd = platform_get_drvdata(pdev);
	if (NULL == hisifd) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	HISI_FB_DEBUG("fb%d, +.\n", hisifd->index);

	// lcd pinctrl normal
	pinctrl_cmds_tx(pdev, lcd_pinctrl_normal_cmds, ARRAY_SIZE(lcd_pinctrl_normal_cmds));

	// lcd gpio request
	gpio_cmds_tx(lcd_gpio_request_cmds, ARRAY_SIZE(lcd_gpio_request_cmds));

	// backlight on
	hisi_lcd_backlight_on(pdev);

	HISI_FB_DEBUG("fb%d, -.\n", hisifd->index);

	return 0;
}

static int mipi_tianma_R63319_8p4_panel_on(struct platform_device *pdev)
{
	struct hisi_fb_data_type *hisifd = NULL;
	struct hisi_panel_info *pinfo = NULL;
	char __iomem *mipi_dsi0_base = NULL;
	char __iomem *mipi_dsi1_base = NULL;
	char __iomem *dpp_base = NULL;
	char __iomem *acm_base = NULL;


#if defined (CONFIG_HUAWEI_DSM)
	static struct lcd_reg_read_t lcd_status_reg[] = {
		{0x0A, 0x0C, 0xFF, "lcd power state"},
	};
#endif

	if (NULL == pdev) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	hisifd = platform_get_drvdata(pdev);
	if (NULL == hisifd) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	HISI_FB_INFO("fb%d, +!\n", hisifd->index);

	pinfo = &(hisifd->panel_info);
	mipi_dsi0_base = hisifd->mipi_dsi0_base;
	mipi_dsi1_base = hisifd->mipi_dsi1_base;
	dpp_base = hisifd->dss_base + DSS_DPP_OFFSET;
	acm_base = hisifd->dss_base + DSS_DPP_ACM_OFFSET;

	if (pinfo->lcd_init_step == LCD_INIT_POWER_ON) {
		HISI_FB_INFO("Init power on.\n");

		// lcd pinctrl normal
		pinctrl_cmds_tx(pdev, lcd_pinctrl_normal_cmds, ARRAY_SIZE(lcd_pinctrl_normal_cmds));

		// lcd gpio request
		gpio_cmds_tx(lcd_gpio_request_cmds, ARRAY_SIZE(lcd_gpio_request_cmds));

		// lcd gpio normal
		gpio_cmds_tx(lcd_gpio_normal_cmds, ARRAY_SIZE(lcd_gpio_normal_cmds));

		pinfo->lcd_init_step = LCD_INIT_MIPI_LP_SEND_SEQUENCE;
	} else if (pinfo->lcd_init_step == LCD_INIT_MIPI_LP_SEND_SEQUENCE) {
		HISI_FB_INFO("Init lcd_init_step is lp send mode.\n");
		lp8556_btv_init();
		mipi_dsi_cmds_tx(lcd_init_display_on_cmds_otp, ARRAY_SIZE(lcd_init_display_on_cmds_otp), mipi_dsi0_base);
		mipi_dsi_cmds_tx(tm_cabc_mode_paras, ARRAY_SIZE(tm_cabc_mode_paras), mipi_dsi0_base);
		
		mipi_dsi_cmds_tx(tm_cabc_ui_on_cmds, ARRAY_SIZE(tm_cabc_ui_on_cmds), mipi_dsi0_base);
		g_cabc_mode = CABC_UI_MODE;
#if defined (CONFIG_HUAWEI_DSM)
		panel_check_status_and_report_by_dsm(lcd_status_reg, ARRAY_SIZE(lcd_status_reg), mipi_dsi0_base);
#endif
		g_debug_enable = 1;
		pinfo->lcd_init_step = LCD_INIT_MIPI_HS_SEND_SEQUENCE;
	} else if (pinfo->lcd_init_step == LCD_INIT_MIPI_HS_SEND_SEQUENCE) {
		if(!runmode_is_factory()) {
			/*this project: 0 means using sRGB, 1 means using color_enhance*/
			if (g_color_enhancement_mode == COLOR_EN_DEFAULT) {
				/*open acm*/
				set_reg(acm_base + ACM_EN, 0x1, 1, 0); //open acm
				/*close gmp*/
				set_reg(dpp_base + LCP_GMP_BYPASS_EN, 0x1, 1, 0);	//disable gmp
			} else if (g_color_enhancement_mode == COLOR_EN_SRGB) {
				/*close acm*/
				set_reg(acm_base + ACM_EN, 0x0, 1, 0); //close acm
				/*open gmp*/
				set_reg(dpp_base + LCP_GMP_BYPASS_EN, 0x0, 1, 0);	//enable gmp
			} else if (g_color_enhancement_mode == COLOR_EN_CLOSED) {
				/*close acm*/
				set_reg(acm_base + ACM_EN, 0x0, 1, 0); //close acm
				/*close gmp*/
				set_reg(dpp_base + LCP_GMP_BYPASS_EN, 0x1, 1, 0);	//disable gmp
			} else {
				HISI_FB_DEBUG(" no this color_enhancement mode!\n");
			};
		}
		HISI_FB_INFO("Init hs send data mode.\n");
	} else {
		HISI_FB_ERR("failed to init lcd!\n");
	}

	// backlight on
	hisi_lcd_backlight_on(pdev);

	HISI_FB_INFO("fb%d, -!\n", hisifd->index);

	return 0;
}

static int mipi_tianma_R63319_8p4_panel_off(struct platform_device *pdev)
{
	struct hisi_fb_data_type *hisifd = NULL;
	struct hisi_panel_info *pinfo = NULL;

	if (NULL == pdev) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	hisifd = platform_get_drvdata(pdev);
	if (NULL == hisifd) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	HISI_FB_INFO("fb%d, +!\n", hisifd->index);

	pinfo = &(hisifd->panel_info);

	/* backlight off */
	hisi_lcd_backlight_off(pdev);
	g_debug_enable = 0;
	if (pinfo->lcd_uninit_step == LCD_UNINIT_MIPI_HS_SEND_SEQUENCE) {
		HISI_FB_INFO("display off(download display off sequence).\n");

		// lcd display off sequence
		mipi_dsi_cmds_tx(display_off_cmds, ARRAY_SIZE(display_off_cmds), hisifd->mipi_dsi0_base);

		pinfo->lcd_uninit_step = LCD_UNINIT_MIPI_LP_SEND_SEQUENCE;
	} else if (pinfo->lcd_uninit_step == LCD_UNINIT_MIPI_LP_SEND_SEQUENCE) {
		pinfo->lcd_uninit_step = LCD_UNINIT_POWER_OFF;
	} else if (pinfo->lcd_uninit_step == LCD_UNINIT_POWER_OFF) {
		HISI_FB_INFO("display off(regulator disabling).\n");

		// lcd gpio lowpower
		gpio_cmds_tx(lcd_gpio_lowpower_cmds, ARRAY_SIZE(lcd_gpio_lowpower_cmds));

		// lcd gpio free
		gpio_cmds_tx(lcd_gpio_free_cmds, ARRAY_SIZE(lcd_gpio_free_cmds));

		// lcd pinctrl lowpower
		pinctrl_cmds_tx(pdev, lcd_pinctrl_lowpower_cmds, ARRAY_SIZE(lcd_pinctrl_lowpower_cmds));

	} else {
		HISI_FB_ERR("failed to uninit lcd!\n");
	}
	HISI_FB_INFO("fb%d, -!\n", hisifd->index);

	return 0;
}

static int mipi_tianma_R63319_8p4_panel_remove(struct platform_device *pdev)
{
	struct hisi_fb_data_type *hisifd = NULL;

	if (NULL == pdev) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	hisifd = platform_get_drvdata(pdev);
	if (NULL == hisifd) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	HISI_FB_DEBUG("fb%d, +.\n", hisifd->index);

	// lcd pinctrl finit
	pinctrl_cmds_tx(pdev, lcd_pinctrl_finit_cmds, ARRAY_SIZE(lcd_pinctrl_finit_cmds));

	HISI_FB_DEBUG("fb%d, -.\n", hisifd->index);

	return 0;
}

static int mipi_tianma_R63319_8p4_panel_set_backlight(struct platform_device *pdev, uint32_t bl_level)
{
	char __iomem *mipi_dsi0_base = NULL;
	struct hisi_fb_data_type *hisifd = NULL;
	int ret = 0;
	static char last_bl_level=0;
	char bl_level_adjust[2] = {
		0x51,
		0xFF,
	};

	struct dsi_cmd_desc lcd_bl_level_adjust[] = {
		{DTYPE_DCS_WRITE1, 0, 100, WAIT_TYPE_US, sizeof(bl_level_adjust), bl_level_adjust},
	};

	if (NULL == pdev) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	hisifd = platform_get_drvdata(pdev);
	if (NULL == hisifd) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	HISI_FB_DEBUG("fb%d, +.\n", hisifd->index);

	if(2 == g_debug_enable){
		ret = btv_i2c_write_u8(lp8556_slope_on.reg,lp8556_slope_on.value);
		HISI_FB_INFO("lp8556_slope_on,g_debug_enable = %d,bl_level = %d!!!\n",g_debug_enable,bl_level);
		g_debug_enable = 3;
	}

	if (1 == g_debug_enable) {
		HISI_FB_INFO("Power on, First set brightness to %d\n", bl_level);
		g_debug_enable = 2;
	}

	if (!bl_level) {
		HISI_FB_INFO("Set backlight to 0 !!!\n");
	}

	if (hisifd->panel_info.bl_set_type & BL_SET_BY_PWM) {
		ret = hisi_pwm_set_backlight(hisifd, bl_level);
	} else if (hisifd->panel_info.bl_set_type & BL_SET_BY_BLPWM) {
		ret = hisi_blpwm_set_backlight(hisifd, bl_level);
	} else if (hisifd->panel_info.bl_set_type & BL_SET_BY_MIPI) {
		mipi_dsi0_base = hisifd->mipi_dsi0_base;

		bl_level_adjust[1] = bl_level * 255 / hisifd->panel_info.bl_max;
		if (last_bl_level != bl_level_adjust[1]){
			last_bl_level = bl_level_adjust[1];
			mipi_dsi_cmds_tx(lcd_bl_level_adjust, ARRAY_SIZE(lcd_bl_level_adjust), mipi_dsi0_base);
		}
	} else {
		HISI_FB_ERR("No such bl_set_type!\n");
	}

	HISI_FB_DEBUG("fb%d, -.\n", hisifd->index);

	return ret;
}


/******************************************************************************/
static ssize_t mipi_tianma_R63319_8p4_panel_model_show(struct platform_device *pdev,
	char *buf)
{
	struct hisi_fb_data_type *hisifd = NULL;
	ssize_t ret = 0;

	if (NULL == buf) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	if (NULL == pdev) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	hisifd = platform_get_drvdata(pdev);
	if (NULL == hisifd) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}


	HISI_FB_DEBUG("fb%d, +.\n", hisifd->index);

	ret = snprintf(buf, PAGE_SIZE, "tianma_R63319_8p4 8.4' VIDEO TFT\n");

	HISI_FB_DEBUG("fb%d, -.\n", hisifd->index);

	return ret;
}

static ssize_t mipi_tianma_R63319_8p4_panel_info_show(struct platform_device *pdev, char *buf)
{
	struct hisi_fb_data_type *hisifd = NULL;
	ssize_t ret = 0;

	if (NULL == buf) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	if (NULL == pdev) {
		HISI_FB_ERR("pdev NULL pointer\n");
		return 0;
	};
	hisifd = platform_get_drvdata(pdev);
	if (NULL == hisifd) {
		HISI_FB_ERR("hisifd NULL pointer\n");
		return 0;
	}

	HISI_FB_DEBUG("fb%d, +.\n", hisifd->index);
	if (buf) {
		ret = snprintf(buf, PAGE_SIZE, "blmax:%u,blmin:%u,lcdtype:%s\n",
				hisifd->panel_info.bl_max, hisifd->panel_info.bl_min, "LCD");
	}

	HISI_FB_DEBUG("fb%d, -.\n", hisifd->index);

	return ret;
}

static ssize_t mipi_tianma_panel_support_mode_show(struct platform_device *pdev,
	char *buf)
{
	struct hisi_fb_data_type *hisifd = NULL;
	ssize_t ret = 0;

	if (NULL == pdev) {
		HISI_FB_ERR("NULL Pointer!\n");
		return ret;
	}

	hisifd = platform_get_drvdata(pdev);
	if (!hisifd) {
		HISI_FB_ERR("hisifd is null\n");
		return ret;
	}

	HISI_FB_DEBUG("fb%d, +.\n", hisifd->index);

	ret = snprintf(buf, PAGE_SIZE, "%d\n", g_support_mode);

	HISI_FB_DEBUG("fb%d, -.\n", hisifd->index);

	return ret;
}

static ssize_t mipi_tianma_panel_support_mode_store(struct platform_device *pdev,
	const char *buf, size_t count)
{
	int ret = 0;
	unsigned long val = 0;
	int flag = -1;
	struct hisi_fb_data_type *hisifd = NULL;

	if (NULL == pdev) {
		HISI_FB_ERR("NULL Pointer!\n");
		return ret;
	}

	hisifd = platform_get_drvdata(pdev);
	if (!hisifd) {
		HISI_FB_ERR("hisifd is null\n");
		return ret;
	}

	ret = strict_strtoul(buf, 0, &val);
	if (ret)
               return ret;

	HISI_FB_DEBUG("fb%d, +.\n", hisifd->index);

	flag = (int)val;

	g_support_mode = flag;

	HISI_FB_DEBUG("fb%d, -.\n", hisifd->index);

	return count;
}

static ssize_t mipi_tm_panel_lcd_cabc_mode_show(struct platform_device *pdev,
	char *buf)
{
	struct hisi_fb_data_type *hisifd = NULL;
	ssize_t ret = 0;

	if (NULL == buf) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	if (NULL == pdev) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	hisifd = platform_get_drvdata(pdev);
	if (NULL == hisifd) {
		HISI_FB_ERR("NULL Pointer!\n");
		return 0;
	}

	ret = snprintf(buf, PAGE_SIZE, "%d\n", g_cabc_mode);
	return ret;
}

static ssize_t mipi_tm_panel_lcd_cabc_mode_store(struct platform_device *pdev,
	const char *buf, size_t count)
{
	int ret = 0;
	ssize_t ret_return = 0;
	unsigned long val = 0;
	int flag=-1;
	struct hisi_fb_data_type *hisifd = NULL;
	char __iomem *mipi_dsi0_base = NULL;

	if (NULL == pdev) {
		HISI_FB_ERR("NULL Pointer\n");
		return -EINVAL;
	}
	hisifd = platform_get_drvdata(pdev);
	if (NULL == hisifd) {
		HISI_FB_ERR("NULL Pointer\n");
		return -EINVAL;
	}

	HISI_FB_DEBUG("fb%d, +.\n", hisifd->index);

	if (NULL == hisifd->mipi_dsi0_base) {
		HISI_FB_ERR("NULL Pointer\n");
		return -EINVAL;
	}
	mipi_dsi0_base =hisifd->mipi_dsi0_base;

	ret = strict_strtoul(buf, 0, &val);
	if (ret)
		return ret;

	flag=(int)val;
	if (flag==CABC_OFF ){
		g_cabc_mode=0;
		mipi_dsi_cmds_tx(tm_cabc_off_cmds, ARRAY_SIZE(tm_cabc_off_cmds),mipi_dsi0_base);
	}else  if (flag==CABC_UI_MODE) {
		g_cabc_mode=1;
		mipi_dsi_cmds_tx(tm_cabc_ui_on_cmds, ARRAY_SIZE(tm_cabc_ui_on_cmds),mipi_dsi0_base);
	} else if (flag==CABC_STILL_MODE ){
		g_cabc_mode=2;
		mipi_dsi_cmds_tx(tm_cabc_still_on_cmds, ARRAY_SIZE(tm_cabc_still_on_cmds),mipi_dsi0_base);
	}else if (flag==CABC_MOVING_MODE ){
		g_cabc_mode=3;
		mipi_dsi_cmds_tx(tm_cabc_moving_on_cmds, ARRAY_SIZE(tm_cabc_moving_on_cmds),mipi_dsi0_base);
	}

	HISI_FB_DEBUG("fb%d, -.\n", hisifd->index);

	ret_return = snprintf((char *)buf, PAGE_SIZE, "%d\n", g_cabc_mode);
	return ret_return;
}


/*because of  architecture limitation,  just use this sys node to control acm and gmp */
static ssize_t mipi_tianma_panel_lcd_ic_color_enhancement_mode_show(struct platform_device *pdev,
	char *buf)
{
	struct hisi_fb_data_type *hisifd = NULL;
	ssize_t ret = 0;

	BUG_ON(pdev == NULL);
	hisifd = platform_get_drvdata(pdev);
	BUG_ON(hisifd == NULL);

	HISI_FB_DEBUG("fb%d, +.\n", hisifd->index);



	ret = snprintf(buf, PAGE_SIZE, "%d\n", g_color_enhancement_mode);

	HISI_FB_DEBUG("fb%d, -.\n", hisifd->index);

	return ret;
}

static ssize_t mipi_tianma_panel_lcd_ic_color_enhancement_mode_store(struct platform_device *pdev,
	const char *buf, size_t count)
{
	int ret = 0;
	unsigned long val = 0;
	int flag=-1;
	struct hisi_fb_data_type *hisifd = NULL;
	char __iomem *dpp_base = NULL;
	char __iomem *acm_base = NULL;


	BUG_ON(pdev == NULL);
	hisifd = platform_get_drvdata(pdev);
	BUG_ON(hisifd == NULL);
	dpp_base = hisifd->dss_base + DSS_DPP_OFFSET;
	acm_base = hisifd->dss_base + DSS_DPP_ACM_OFFSET;

	ret = strict_strtoul(buf, 0, &val);
	if (ret)
        return ret;

	HISI_FB_DEBUG("fb%d, +.\n", hisifd->index);

	flag=(int)val;

	HISI_FB_INFO("fb%d, set val = %d", hisifd->index, flag);

	/*this project: 0 means using sRGB, 1 means using color_enhance*/
	if (flag == COLOR_EN_DEFAULT) {
		/*open acm*/
		set_reg(acm_base + ACM_EN, 0x1, 1, 0); //open acm
		/*close gmp*/
		g_color_enhancement_mode = COLOR_EN_DEFAULT;
		set_reg(dpp_base + LCP_GMP_BYPASS_EN, 0x1, 1, 0);	//disable gmp
	} else if (flag == COLOR_EN_SRGB) {
		/*close acm*/
		set_reg(acm_base + ACM_EN, 0x0, 1, 0); //close acm
		/*open gmp*/
		g_color_enhancement_mode = COLOR_EN_SRGB;
		set_reg(dpp_base + LCP_GMP_BYPASS_EN, 0x0, 1, 0);	//enable gmp
	} else if (flag == COLOR_EN_CLOSED) {
		/*close acm*/
		set_reg(acm_base + ACM_EN, 0x0, 1, 0); //close acm
		/*close gmp*/
		g_color_enhancement_mode = COLOR_EN_CLOSED;
		set_reg(dpp_base + LCP_GMP_BYPASS_EN, 0x1, 1, 0);	//disable gmp
	} else {
		HISI_FB_DEBUG(" no this color_enhancement mode!\n");
	};

	HISI_FB_DEBUG("fb%d, -.\n", hisifd->index);

	return snprintf((char *)buf, count, "%d\n", g_color_enhancement_mode);
}


static struct hisi_panel_info g_panel_info = {0};
static struct hisi_fb_panel_data g_panel_data = {
	.panel_info = &g_panel_info,
	.set_fastboot = mipi_tianma_R63319_8p4_panel_set_fastboot,
	.on = mipi_tianma_R63319_8p4_panel_on,
	.off = mipi_tianma_R63319_8p4_panel_off,
	.remove = mipi_tianma_R63319_8p4_panel_remove,
	.set_backlight = mipi_tianma_R63319_8p4_panel_set_backlight,
	.lcd_model_show = mipi_tianma_R63319_8p4_panel_model_show,
	.panel_info_show = mipi_tianma_R63319_8p4_panel_info_show,
	.lcd_support_mode_show = mipi_tianma_panel_support_mode_show,
	.lcd_support_mode_store = mipi_tianma_panel_support_mode_store,
	.lcd_cabc_mode_show = mipi_tm_panel_lcd_cabc_mode_show,
	.lcd_cabc_mode_store = mipi_tm_panel_lcd_cabc_mode_store,
	.lcd_ic_color_enhancement_mode_store = mipi_tianma_panel_lcd_ic_color_enhancement_mode_store,
	.lcd_ic_color_enhancement_mode_show = mipi_tianma_panel_lcd_ic_color_enhancement_mode_show,
};
/*******************************************************************************
**
*/
static int mipi_tianma_R63319_8p4_probe(struct platform_device *pdev)
{
	int ret = 0;
	struct hisi_panel_info *pinfo = NULL;
	struct device_node *np = NULL;
	uint32_t bl_type = 0;
	uint32_t lcd_display_type = 0;
	int support_mode = 0;
	struct device *dev = &pdev->dev;
	np = of_find_compatible_node(NULL, NULL, DTS_COMP_TIANMA_R63319_8P4);
	if (!np) {
		HISI_FB_ERR("NOT FOUND device node %s!\n", DTS_COMP_TIANMA_R63319_8P4);
		goto err_return;
	}

	ret = of_property_read_u32(np, LCD_DISPLAY_TYPE_NAME, &lcd_display_type);
	if (ret) {
		HISI_FB_ERR("get lcd_display_type failed!\n");
		lcd_display_type = PANEL_DUAL_MIPI_CMD;
	}

	lcd_display_type = PANEL_DUAL_MIPI_VIDEO;

	ret = of_property_read_u32(np, LCD_BL_TYPE_NAME, &bl_type);
	if (ret) {
		HISI_FB_ERR("get lcd_bl_type failed!\n");
		bl_type = BL_SET_BY_MIPI;
	}
	HISI_FB_INFO("bl_type=0x%x.", bl_type);

	if (hisi_fb_device_probe_defer(lcd_display_type, bl_type)) {
		goto err_probe_defer;
	}

	HISI_FB_INFO("%s\n", DTS_COMP_TIANMA_R63319_8P4);

	//gpio_lcd_1v8_enable, gpio_lcd_reset, gpio_lcd_vsp_enable, gpio_lcd_vsp_enable, gpio_lcd_bl_enable
	//gpios = <&gpio1 4 0>, <&gpio2 4 0>,  <&gpio3 7 0>, <&gpio4 0 0>, <&gpio6 4 0>;
	//gpio_1_4   12
	gpio_lcd_vcc1v8_enable = of_get_named_gpio(np, "gpios", 0);

	//gpio_2_4   20
	gpio_lcd_reset = of_get_named_gpio(np, "gpios", 1);

	//gpio_3_7   31
	gpio_lcd_p5v5_enable = of_get_named_gpio(np, "gpios", 2);

	//gpio_4_0   32
	gpio_lcd_n5v5_enable = of_get_named_gpio(np, "gpios", 3);

	//gpio_6_4   52
	gpio_lcd_bl_enable = of_get_named_gpio(np, "gpios", 4);
	//gpio_1_1   9
	gpio_lcd_g_bl_enable = of_get_named_gpio(np, "gpios", 5);

	HISI_FB_INFO("gpio_lcd_vcc1v8_enable = %d, gpio_lcd_reset = %d, gpio_lcd_p5v5_enable = %d, gpio_lcd_n5v5_enable = %d, gpio_lcd_bl_enable = %d, gpio_lcd_g_bl_enable = %d\n", \
			gpio_lcd_vcc1v8_enable, gpio_lcd_reset, gpio_lcd_p5v5_enable, gpio_lcd_n5v5_enable, gpio_lcd_bl_enable, gpio_lcd_g_bl_enable);

	pdev->id = 1;
	/* init panel info */
	pinfo = g_panel_data.panel_info;
	memset(pinfo, 0, sizeof(struct hisi_panel_info));
	pinfo->xres = 1600;
	pinfo->yres = 2560;
	pinfo->width = 113;
	pinfo->height = 181;
	pinfo->orientation = LCD_PORTRAIT;
	pinfo->bpp = LCD_RGB888;
	pinfo->bgr_fmt = LCD_RGB;
	pinfo->bl_set_type = bl_type; //BL_SET_BY_MIPI;
	if (pinfo->bl_set_type == BL_SET_BY_BLPWM)
		pinfo->blpwm_input_ena = 1;


#ifdef CONFIG_BACKLIGHT_10000
	pinfo->bl_min = 157;
	pinfo->bl_max = 9960;
	pinfo->bl_default = 4000;
	pinfo->blpwm_precision_type = BLPWM_PRECISION_10000_TYPE;
	pinfo->blpwm_out_div_value = 7;//(18K/(7+1) = 2.25K)
#else
	pinfo->bl_min = 4;
	pinfo->bl_max = 255;
	pinfo->bl_default = 102;
#endif

	pinfo->vsync_ctrl_type = 0;// (VSYNC_CTRL_ISR_OFF | VSYNC_CTRL_MIPI_ULPS);

	pinfo->type = lcd_display_type;
	pinfo->frc_enable = 0;
	pinfo->esd_enable = 0;
	pinfo->dirty_region_updt_support = 0;

	/* prefix ce & sharpness */
	pinfo->prefix_ce_support = 0;
	pinfo->prefix_sharpness1D_support = 0;
	pinfo->prefix_sharpness2D_support = 0;
	
	pinfo->color_temperature_support = 1;
	pinfo->comform_mode_support = 1;

	pinfo->lcd_uninit_step_support = 1;
	pinfo->mipi.max_tx_esc_clk = 10 * 1000000;

	//sbl
	pinfo->sbl_support = 1;
	pinfo->smart_bl.strength_limit = 128;
	pinfo->smart_bl.calibration_a = 60;
	pinfo->smart_bl.calibration_b = 95;
	pinfo->smart_bl.calibration_c = 5;
	pinfo->smart_bl.calibration_d = 1;
	pinfo->smart_bl.t_filter_control = 5;
	pinfo->smart_bl.backlight_min = 480;
	pinfo->smart_bl.backlight_max = 4096;
	pinfo->smart_bl.backlight_scale = 0xff;
	pinfo->smart_bl.ambient_light_min = 14;
	pinfo->smart_bl.filter_a = 1738;
	pinfo->smart_bl.filter_b = 6;
	pinfo->smart_bl.logo_left = 0;
	pinfo->smart_bl.logo_top = 0;
	pinfo->smart_bl.variance_intensity_space = 145;
	pinfo->smart_bl.slope_max = 54;
	pinfo->smart_bl.slope_min = 160;

	//ACM
	pinfo->acm_support = 1;
	if (pinfo->acm_support == 1) {
		pinfo->acm_lut_hue_table = acm_lut_hue_table;
		pinfo->acm_lut_hue_table_len = ARRAY_SIZE(acm_lut_hue_table);
		pinfo->acm_lut_sata_table = acm_lut_sata_table;
		pinfo->acm_lut_sata_table_len = ARRAY_SIZE(acm_lut_sata_table);
		pinfo->acm_lut_satr_table = acm_lut_satr_table;
		pinfo->acm_lut_satr_table_len = ARRAY_SIZE(acm_lut_satr_table);
		pinfo->acm_valid_num = 7;
		pinfo->r0_hh = 0x7f;
		pinfo->r0_lh = 0x0;
		pinfo->r1_hh = 0xff;
		pinfo->r1_lh = 0x80;
		pinfo->r2_hh = 0x17f;
		pinfo->r2_lh = 0x100;
		pinfo->r3_hh = 0x1ff;
		pinfo->r3_lh = 0x180;
		pinfo->r4_hh = 0x27f;
		pinfo->r4_lh = 0x200;
		pinfo->r5_hh = 0x2ff;
		pinfo->r5_lh = 0x280;
		pinfo->r6_hh = 0x37f;
		pinfo->r6_lh = 0x300;

		/*for cinema mode */
		pinfo->cinema_acm_valid_num = 7;
		pinfo->cinema_r0_hh = 0x7f;
		pinfo->cinema_r0_lh = 0x0;
		pinfo->cinema_r1_hh = 0xff;
		pinfo->cinema_r1_lh = 0x80;
		pinfo->cinema_r2_hh = 0x17f;
		pinfo->cinema_r2_lh = 0x100;
		pinfo->cinema_r3_hh = 0x1ff;
		pinfo->cinema_r3_lh = 0x180;
		pinfo->cinema_r4_hh = 0x27f;
		pinfo->cinema_r4_lh = 0x200;
		pinfo->cinema_r5_hh = 0x2ff;
		pinfo->cinema_r5_lh = 0x280;
		pinfo->cinema_r6_hh = 0x37f;
		pinfo->cinema_r6_lh = 0x300;

		//ACM_CE
		//pinfo->acm_ce_support = 1;
	}

	//Gama LCP
	pinfo->gamma_support = 1;
	if (pinfo->gamma_support == 1) {
		pinfo->gamma_lut_table_R = gamma_lut_table_R;
		pinfo->gamma_lut_table_G = gamma_lut_table_G;
		pinfo->gamma_lut_table_B = gamma_lut_table_B;
		pinfo->gamma_lut_table_len = ARRAY_SIZE(gamma_lut_table_R);
		pinfo->igm_lut_table_R = igm_lut_table_R;
		pinfo->igm_lut_table_G = igm_lut_table_G;
		pinfo->igm_lut_table_B = igm_lut_table_B;
		pinfo->igm_lut_table_len = ARRAY_SIZE(igm_lut_table_R);

		pinfo->gmp_support = 1;
		pinfo->gmp_lut_table_low32bit = &gmp_lut_table_low32bit[0][0][0];
		pinfo->gmp_lut_table_high4bit = &gmp_lut_table_high4bit[0][0][0];
		pinfo->gmp_lut_table_len = ARRAY_SIZE(gmp_lut_table_low32bit);

		pinfo->xcc_support = 1;
		pinfo->xcc_table = xcc_table;
		pinfo->xcc_table_len = ARRAY_SIZE(xcc_table);
	}

	pinfo->ifbc_type = IFBC_TYPE_NONE;

	pinfo->ldi.h_back_porch = 110;
	pinfo->ldi.h_front_porch = 300;
	pinfo->ldi.h_pulse_width = 48;
	pinfo->ldi.v_back_porch = 26;
	pinfo->ldi.v_front_porch =14;
	pinfo->ldi.v_pulse_width = 5;

	pinfo->mipi.lane_nums = DSI_4_LANES;
	pinfo->mipi.color_mode = DSI_24BITS_1;
	pinfo->mipi.vc = 0;
	pinfo->mipi.dsi_bit_clk = 475;
	pinfo->dsi_bit_clk_upt_support = 0;
	pinfo->mipi.dsi_bit_clk_upt = pinfo->mipi.dsi_bit_clk;
	pinfo->mipi.dsi_bit_clk_val1 = 471;
	pinfo->mipi.dsi_bit_clk_val2 = 475;
	pinfo->mipi.dsi_bit_clk_val3 = 480;
	pinfo->mipi.dsi_bit_clk_val4 = 493;
	pinfo->mipi.dsi_bit_clk_val5 = 500;

	pinfo->mipi.non_continue_en = 0;
	pinfo->pxl_clk_rate = 1568*2*100000UL;
	pinfo->pxl_clk_rate_adjust = 320 * 1000000UL;

	pinfo->mipi.burst_mode = DSI_BURST_SYNC_PULSES_1;

	//is dual_mipi or single_mipi
	if (is_dual_mipi_panel_ext(pinfo))  {
		pinfo->ifbc_type = IFBC_TYPE_NONE;
		pinfo->pxl_clk_rate_div = 2;
		HISI_FB_INFO("PANEL_DUAL_MIPI: 8 lane \n");
	} else {
		//pinfo->ifbc_type = IFBC_TYPE_NONE;
		pinfo->pxl_clk_rate_div = 1;
		HISI_FB_INFO("PANEL_SINGLE_MIPI: 4 lane \n");
	}

	if (pinfo->pxl_clk_rate_div > 1) {
		pinfo->ldi.h_back_porch /= pinfo->pxl_clk_rate_div;
		pinfo->ldi.h_front_porch /= pinfo->pxl_clk_rate_div;
		pinfo->ldi.h_pulse_width /= pinfo->pxl_clk_rate_div;
	}
	
	if(pinfo->comform_mode_support == 1){
		support_mode = (support_mode | 1);
	}
	/*use  lcd_ic_color_enhancement_mode node, not use lcd_acm_state node*/
	support_mode = (support_mode | 4);
	g_support_mode =   support_mode;

	// lcd vcc init
	ret = vcc_cmds_tx(pdev, lcd_vcc_init_cmds,
		ARRAY_SIZE(lcd_vcc_init_cmds));
	vcc_cmds_tx(pdev, lcd_vcc_enable_cmds,
		ARRAY_SIZE(lcd_vcc_enable_cmds));
	if(runmode_is_factory()) {
		HISI_FB_INFO("Factory mode, disable features: dirty update etc.\n");
		pinfo->dirty_region_updt_support = 0;
		pinfo->sbl_support = 0;
		pinfo->acm_support = 0;
		pinfo->acm_ce_support = 0;
		pinfo->esd_enable = 0;
		pinfo->blpwm_input_ena = 0;
		pinfo->blpwm_precision_type = BLPWM_PRECISION_DEFAULT_TYPE;
		pinfo->bl_min = 4;
		pinfo->bl_max = 255;
		pinfo->comform_mode_support = 0;
	}

	// lcd pinctrl init
	ret = pinctrl_cmds_tx(pdev, lcd_pinctrl_init_cmds,
		ARRAY_SIZE(lcd_pinctrl_init_cmds));
	if (ret != 0) {
		HISI_FB_ERR("Init pinctrl failed, defer\n");
		goto err_return;
	}

	// alloc panel device data
	ret = platform_device_add_data(pdev, &g_panel_data,
		sizeof(struct hisi_fb_panel_data));
	if (ret) {
		HISI_FB_ERR("platform_device_add_data failed!\n");
		goto err_device_put;
	}

	hisi_fb_add_device(pdev);
	add_sysfs_interfaces(dev);

	HISI_FB_DEBUG("-.\n");

	return 0;

err_device_put:
	platform_device_put(pdev);
err_return:
	return ret;
err_probe_defer:
	return -EPROBE_DEFER;

	return ret;
}

static int btv_i2c_probe(struct i2c_client *client,
	const struct i2c_device_id *i2c_id)
{
	HISI_FB_INFO("[I2C]btv_i2c_probe");
	struct device_node *np = NULL;
	int ret = 0;

	if (!i2c_check_functionality(client->adapter, I2C_FUNC_I2C)) {
		HISI_FB_ERR("%s: I2C functionality not Supported.\n", __func__);
		return -EIO;
	}

	np = of_find_compatible_node(NULL, NULL, BTV_DEV_NAME);
	if (!np) {
		HISI_FB_ERR("NOT FOUND device node %s!\n", BTV_DEV_NAME);
		ret = -1;
		goto err_return;
	}
	g_sony_client = client;

err_return:

	return ret;
}


static const struct of_device_id hisi_panel_match_table[] = {
	{
		.compatible = DTS_COMP_TIANMA_R63319_8P4,
		.data = NULL,
	},
	{},
};
MODULE_DEVICE_TABLE(of, hisi_panel_match_table);

static struct platform_driver this_driver = {
	.probe = mipi_tianma_R63319_8p4_probe,
	.remove = NULL,
	.suspend = NULL,
	.resume = NULL,
	.shutdown = NULL,
	.driver = {
		.name = "mipi_tianma_R63319_8p4",
		.owner = THIS_MODULE,
		.of_match_table = of_match_ptr(hisi_panel_match_table),
	},
};


#define BTV_I2C_NAME "btv_i2c_lp8556"
static const struct i2c_device_id btv_i2c_id[] = {
	{ BTV_I2C_NAME, 0, },
	{ }
};

static struct of_device_id btv_i2c_of_match[] = {
	{ .compatible = "lp8556,btv_i2c_adapter", },
	{ }
};
MODULE_DEVICE_TABLE(of, btv_i2c_of_match);

static struct i2c_driver btv_i2c_driver = {
	.driver = {
		.name = BTV_I2C_NAME,
		.owner = THIS_MODULE,
		.of_match_table = btv_i2c_of_match,
	},
	.probe = btv_i2c_probe,
	.id_table = btv_i2c_id,
};

static int __init mipi_tianma_R63319_8p4_panel_init(void)
{
	int ret = 0;

	ret = platform_driver_register(&this_driver);
	if (ret) {
		HISI_FB_ERR("platform_driver_register failed, error=%d!\n", ret);
		return ret;
	}

	ret = i2c_add_driver(&btv_i2c_driver);
	if (ret) {
		HISI_FB_ERR("btv I2C Driver add fail, rc = %d.\n",ret);
	}

	return ret;
}

module_init(mipi_tianma_R63319_8p4_panel_init);



